<div class="">
    <div class="card" id="afa-card-border0">
        <a routerlink="/dashboard" ng-reflect-router-link="/dashboard" href="/dashboard">
            <button class="btn btn-primary mt-5 ml-4">Return to Customer View</button>
        </a>
        <div class="card-body" id="accountInfoContent">
            <div class="row">
                <div class="col-md-8">
                    <p>
                        #<span #systemInfoCustomerNumber id="systemInfoCustomerNumber">{{ systemInfo.customerNumber }}</span>&nbsp;&nbsp;
                        <span id="systemInfoCustomerName">{{ systemInfo.customerName }}</span>&nbsp;&nbsp;
                    </p>
    
                    <div class="col-sm-3 pl-0" *ngIf="systemInfo.customerRatingValue === 0; else elseBlock">
                        <div class="customer-rating" id="customerRatingBg" [ngClass]="'ratingValueBg0'">
                            <span id="customerRating" [ngClass]="'ratingValueText0'">{{ systemInfo.customerRating }}</span>
                        </div>
                    </div>
    
                    <div class="col-sm-3 pl-0" *ngIf="systemInfo.customerRatingValue === 1;">
                        <div class="customer-rating" id="customerRatingBg" [ngClass]="'ratingValueBg1'">
                            <span id="customerRating" [ngClass]="'ratingValueText1'">{{ systemInfo.customerRating }}</span>
                        </div>
                    </div>
    
                    <div class="col-sm-3 pl-0" *ngIf="systemInfo.customerRatingValue === 2;">
                        <div class="customer-rating" id="customerRatingBg" [ngClass]="'ratingValueBg2'">
                            <span id="customerRating" [ngClass]="'ratingValueText2'">{{ systemInfo.customerRating }}</span>
                        </div>
                    </div>
    
                    <div class="col-sm-3 pl-0" *ngIf="systemInfo.customerRatingValue === 3;">
                        <div class="customer-rating" id="customerRatingBg" [ngClass]="'ratingValueBg3'">
                            <span id="customerRating" [ngClass]="'ratingValueText3'">{{ systemInfo.customerRating }}</span>
                        </div>
                    </div>
    
                    <ng-template #elseBlock>
                        <!-- There was an error. Please contact an administrator -->
                    </ng-template>
    
                    <p class="alarmAccount">
                        Account #<span id="alarmAccount">{{systemInfo.alarmAccount}}</span>&nbsp;&nbsp;

                        <span *ngIf="systemInfo.featureMessage === '3G'" else non3GBlock>
                            <!-- Open Feature Message Modal -->
                            <span id="featureMessage" class="special-flag-text" (click)="open3GModal()" [ngClass]="'underlineDashed'">{{systemInfo.featureMessage}}</span>
                        </span>
                        <ng-template #non3GBlock>
                            <span id="featureMessage" class="special-flag-text">{{systemInfo.featureMessage}}</span>
                        </ng-template>
                        <!-- <span id="featureMessage" class="special-flag-text">{{systemInfo.featureMessage}}</span> -->
                    </p>
                    <p class="monitoredBy">
                        <span class="afa-text-dark-blue">
                            Monitored by <span id="monitoredBy">{{systemInfo.monitoredBy}}</span>
                        </span>
                    </p>
                    <p>
                        <span id="addressLine">{{systemInfo.addressLine}}</span>
                    </p>
                    <p>
                        <span class="font-weight-400">
                            Contract Started on <span id="originalContractDate">{{systemInfo.originalContractDate}}</span> for <span id="originalContractMonths">{{systemInfo.originalContractMonths}}</span> months
                        </span>
                    </p>
                    <p>
                        <span id="contractStatus" class="font-weight-400">{{systemInfo.contractStatus}}</span>
                    </p>
                    <p>
                        Serviced by <span id="serviceCompany">{{systemInfo.serviceCompany}}</span>
                    </p>
                    <p>
                        <!-- Last service ticket -->
                        <a class="text-blue mx-auto mb-0" id="showLastServiceTicketModal" (click)="showLastServiceTicketModal()"><i class="ni ni-fat-add" id="add-icon-blue"></i></a>
                        <span id="lastServiceTicketOn">{{systemInfo.lastServiceTicketOn}}</span>
                    </p>
                </div>
                <div class="col-md-4 system-info-aside">
                    <p class="afa-text-blue text-right">
                        <span id="systemType">{{systemInfo.systemType}}</span>
                    </p>
                    <p class="afa-text-blue text-right">
                        <span>Maintenance - <span id="maintenance">{{systemInfo.maintenance}}</span></span>
                    </p>
                    <p class="afa-text-blue text-right">
                        <span id="rmrValue">{{systemInfo.rmrValue | currency}}</span>/Month RMR
                    </p>
                    <p class="afa-text-blue text-right">
                        <span id="systemInfoBillFrequency">{{systemInfo.billFrequency}}</span>
                    </p>
                    <p class="afa-text-blue text-right">
                        <span id="systemInfoNextCycleOn">{{systemInfo.nextCycleOn}}</span>
                    </p>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-12 marginTopBottom-1rem">
                    <div class="afa-bg-panel-type system-notes-border system-notes-padding">
                        <p>Panel Type - <span id="panelType"></span></p>
                        <p>
                            <span class="afa-text-dark-blue">Cell Model - </span>
                            <span id="cellModel">{{systemInfo.cellModel}}</span>
                        </p>
                        <p>
                            <span class="afa-text-dark-blue">Carrier - </span>
                            <span id="cellCarrier">{{systemInfo.cellCarrier}}</span>
                        </p>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12 marginTopBottom-1rem">
                    <div class="afa-bg-tan system-notes-border system-notes-padding">
                        <h3 class="afa-text-blue">System Notes</h3>
                        <!-- <p id="systemNotes">{{systemInfo.systemNotes}}</p> -->
                        <pre id="systemNotes">
                            {{systemInfo.systemNotes}}
                        </pre>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="">
                        <ul class="nav nav-tabs" id="myTab" role="tablist">
                            <li class="nav-item info-tab info-tab-bg">
                                <a class="nav-link" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Information from <span id="centralStationMonitoredBy"></span></a>
                            </li>
                        </ul>
                        <div class="tab-content info-tab-bg" id="myTabContent">
                            <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                                <ul class="list-unstyled tab-list-padding">
                                    <li>No connection to Central Station at this time.</li>
                                </ul>
                            </div>
                            <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec vitae egestas felis. Etiam ornare vehicula sollicitudin. Etiam condimentum nunc vel tempus dictum. Pellentesque nec elementum augue. Praesent et pretium magna. Sed id mi malesuada, posuere velit ac, aliquet mi. Nullam fringilla risus in nulla eleifend, non ornare turpis feugiat. Ut tellus ante, semper vitae tortor et, porta dignissim tellus. In hendrerit pellentesque luctus.</p>
                            </div>
                            <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec vitae egestas felis. Etiam ornare vehicula sollicitudin. Etiam condimentum nunc vel tempus dictum. Pellentesque nec elementum augue. Praesent et pretium magna. Sed id mi malesuada, posuere velit ac, aliquet mi. Nullam fringilla risus in nulla eleifend, non ornare turpis feugiat. Ut tellus ante, semper vitae tortor et, porta dignissim tellus. In hendrerit pellentesque luctus.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- <a class="btn btn-primary btn-lg mt-5" routerLink="/dashboard">Back to Dashboard</a> -->
    </div>
   
</div>

<!-- Feature Message Modal -->
<div class="modal fade" id="threeGModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" id="maxWidth-900">
        <div class="modal-content">
            <div class="modal-header pb-0 pl-2">
                <div class="col-md-12">
                    <!-- <h2 class="modal-title" id="exampleModalLabel">title</h2> -->
                </div>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body pt-0">
                <div class="card border-0">
                    <div class="card-body p-0" id="">
                        <!-- <div class="col-md-12" *ngFor="let item of basicUpgradeInfo">
                            <div class="col-md-6">
                                <ul class="list-group">
                                    <li class="list-group-item"> {{item.upgradeOptions}}</li>
                                    <li class="list-group-item"> {{item.upgradeOption1}}</li>
                                    <li class="list-group-item"> {{item.upgradeOption2}}</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <ul class="list-group">
                                    <li class="list-group-item">{{item.requirements}}</li>
                                    <li class="list-group-item"> {{item.requirement1}}</li>
                                    <li class="list-group-item"> {{item.requirement2}}</li>
                                </ul>
                            </div>
                        </div> -->
            
                        <div class="table-responsive">
                            <table class="table align-items-center" *ngFor="let item of basicUpgradeInfo">
                                <thead>
                                    <tr>
                                        <th scope="col">
                                            {{item.upgradeOptions}}
                                        </th>
                                        <th scope="col">
                                            {{item.requirements}}
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th>{{item.upgradeOption1}}</th>
                                        <th>{{item.requirement1}}</th>
                                    </tr>
                                    <tr>
                                        <th>{{item.upgradeOption2}}</th>
                                        <th>{{item.requirement2}}</th>
                                    </tr>
                                    <tr>
                                        <th>{{item.upgradeOption3}}</th>
                                        <th>{{item.requirement3}}</th>
                                    </tr>
                                    <tr>
                                        <th>{{item.upgradeOption4}}</th>
                                        <th>{{item.requirement4}}</th>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="hideTicketInfoModal" type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Last Service Ticket Modal -->
<div class="modal fade" id="lastServiceTicketModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" id="maxWidth-900">
        <!-- <div class="modal-content">
            <div class="modal-header pb-0 pl-2">
                <div class="col-md-3">
                    <h2 class="modal-title" id="exampleModalLabel">content</h2>
                </div>
                
            </div>
            <div class="modal-body pt-0">
                <div class="card border-0">
                    <div class="card-body p-0" id="ticketInfoContent">
                        <div class="row  pt-3">
                            <p>content</p>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="list-style-type-none padding-left0">
                                    <p>content</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="list-style-type-none padding-left0">
                                    <p>content</p>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <h3>Customer Comments</h3>
                                <div class="afa-bg-tan note-padding">
                                    <p>contnetn</p>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 pt-3 pb-3">
                                <button class="btn btn-primary boc-btn ml-0" >
                                    Notes
                                </button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <h3>Last Service Note</h3>
                                <div class="afa-bg-tan note-padding">
                                    <p>content</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="hideTicketInfoModal" type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div> -->
        <div class="modal-content" *ngFor="let item of serviceTicketInfo2">
            <div class="modal-header pb-0 pl-2">
                <div class="col-md-3">
                    <h2 class="modal-title" id="exampleModalLabel">Ticket #{{ item.ticket_Number }}</h2>
                </div>
                <div class="col-md-5">
                    <p class="modal-title">Created On: {{ item.creationDate }}</p>
                    <p class="modal-title">By: {{ item.entered_By }}</p>
                </div>
                <div class="col-md-4">
                    <p class="modal-title">Ticket Status: {{ item.ticketStatus }}</p>
                </div>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body pt-0">
                <div class="card border-0">
                    <div class="card-body p-0" id="ticketInfoContent">
                        <div class="row  pt-3">
                            <div class="col-md-3">
                                <p>System: {{ item.alarmAccount }}</p>
                            </div>
                            <div class="col-md-5">
                                <p>{{ item.system_Code }}</p>
                            </div>
                            <div class="col-md-4">
                                <p>System Status: {{ item.systemStatus }}</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="list-style-type-none padding-left0">
                                    <p>Address: {{ item.addressLine }}</p>
                                    <p>Requested by: {{ item.requested_By }} <span class="pl-3">{{ item.requested_By_Phone | phone }}</span> </p>
                                    <p>Service performed by: {{ item.service_Company_Code }}</p>
                                    <p>Problem Code: {{ item.problem_Code }}</p>
                                    <p>Paid by AFA: {{ item.afaPayment | currency }}</p>
                                </div>
                            </div>
                            <div class="col-md-6" [style.display]="'flex'" [style.margin-top]="'auto'">
                                <div class="list-style-type-none padding-left0">
                                    <p>Resolution: {{ item.resolution_Code }}</p>
                                    <p>Paid by Customer: {{ item.customerPayment }}</p>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <h3>Customer Comments</h3>
                                <div class="afa-bg-tan note-padding">
                                    <p>{{ item.customerComments }}</p>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 pt-3 pb-3">
                                <button class="btn btn-primary boc-btn ml-0 mb-0" (click)="openServiceTicketNotesModal()">
                                    Notes
                                </button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <h3>Last Service Note</h3>
                                <div class="afa-bg-tan note-padding">
                                    <p>{{ item.lastTicketNote }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="hideTicketInfoModal" type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Service Ticket Notes Modal -->
<div class="modal fade" id="lastServiceTicketNotesModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" id="maxWidth-900">
        <div class="modal-content">
            <div class="modal-header">
                <div class="col-md-12">
                    <p>Ticket Note</p>
                </div>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="card">
                    <div class="card-body">

                        <div class="table-responsive">
                            <table class="table align-items-center table-borderless">
                                <thead>
                                    <tr>
                                        <th scope="col" id="fontSize-75rem" style="margin-bottom:0">Enter Date</th>
                                        <th scope="col" id="fontSize-75rem" style="margin-bottom:0">Entered By</th>
                                        <th scope="col" id="fontSize-75rem" style="margin-bottom:0">Note</th>
                                    </tr>
                                </thead>
                                <tbody *ngFor="let item of serviceTicketNotes">
                                    <td>{{ item.enterDate }}</td>
                                    <td>{{ item.enteredBy }}</td>
                                    <td>{{ item.notes }}</td>      
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="hideServiceTicketNotesModal" type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
