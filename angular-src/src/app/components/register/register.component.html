<div class="pl-5 pr-5 mt-5 mb-5">
<div class="flashMessage">
    <flash-messages></flash-messages>
</div>
<h2>Register</h2>
<form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
        <label>First Name</label>
        <input 
            type="text"
            formControlName="firstName"
            class="form-control"
            [ngClass]="{ 'is-invalid': submitted && f.firstName.errors }">
            <div *ngIf="submitted && f.firstName.errors" class="invalid-feedback">
                <div *ngIf="f.firstName.errors.required">
                    First Name is required
                </div>
                </div>
    </div>
    <div class="form-group">
        <label>Last Name</label>
        <input 
            type="text"
            formControlName="lastName"
            class="form-control"
            [ngClass]="{ 'is-invalid': submitted && f.lastName.errors }">
            <div *ngIf="submitted && f.lastName.errors" class="invalid-feedback">
                <div *ngIf="f.lastName.errors.required">
                    Last Name is required
                </div>
                </div>
    </div>
    <div class="form-group">
        <label>Username</label>
        <input 
            type="email"
            formControlName="username"
            class="form-control"
            [ngClass]="{ 'is-invalid': submitted && f.username.errors }">
            <div *ngIf="submitted && f.username.errors" class="invalid-feedback">
                <div *ngIf="f.username.errors.required">
                    Username must be a valid email address
                </div>
                </div>
    </div>
    <div class="form-group">
        <label>Email</label>
        <input 
            type="email"
            formControlName="email"
            class="form-control"
            [ngClass]="{ 'is-invalid': submitted && f.email.errors }">
            <div *ngIf="submitted && f.email.errors" class="invalid-feedback">
                <div *ngIf="f.email.errors.required">
                    Email must be a valid email address
                </div>
                </div>
    </div>

    <div class="form-group">
        <label>Alarm Connections User Link</label>
        <input 
            type="text"
            formControlName="afauserLink"
            class="form-control"
            [ngClass]="{ 'is-invalid': submitted && f.afauserLink.errors }">
            <div *ngIf="submitted && f.afauserLink.errors" class="invalid-feedback">
                <div *ngIf="f.afauserLink.errors.required">
                    Alarm Connections User Link is required
                </div>
            </div>
    </div>

    <div *ngIf="authService.isAdmin()">
        <div class="form-group">
            <label>Alarm Connections Role</label>
            <div class="dropdown">
                <select 
                    formControlName="afaRole"
                    class="form-control ml-3"
                    [ngClass]="{'is-invalid': submitted && f.afaRoleAdminOnly.errors}">
                    <option
                        *ngFor="let afaRoleAdminOnly of afaRoleAdminOnly"
                        value="{{ afaRoleAdminOnly.id }}" [ngValue]="afaRoleAdminOnly.id"
                        >{{afaRoleAdminOnly.userTier}} - {{ afaRoleAdminOnly.id }}</option>
                </select>
                <!-- <div *ngIf="submitted && f.afaRoleAdminOnly.errors" class="invalid-feedback">
                    <div *ngIf="f.afaRoleAdminOnly.errors.required">A Role is required</div>
                </div> -->
            </div>
        </div>
    </div>
    <div *ngIf="authService.isSuperAdmin()">
        <div class="form-group">
            <label>Alarm Connections Role</label>
            <div class="dropdown">
                <select 
                    formControlName="afaRole"
                    class="form-control ml-3"
                    [ngClass]="{'is-invalid': submitted && f.afaRole.errors}">
                    <option
                        *ngFor="let afaRole of afaRole"
                        value="{{ afaRole.id }}" [ngValue]="afaRole.id"
                        >{{afaRole.userTier}} - {{ afaRole.id }}</option>
                </select>
                <div *ngIf="submitted && f.afaRole.errors" class="invalid-feedback">
                    <div *ngIf="f.afaRole.errors.required">A Role is required</div>
                </div>
            </div>
        </div>
    </div>

    <!-- <div class="form-group">
        <label>AFA Role</label>
        <div class="dropdown">
            <select 
                formControlName="afaRole"
                class="form-control ml-3"
                [ngClass]="{'is-invalid': submitted && f.afaRole.errors}">
                <option
                    *ngFor="let afaRole of afaRole"
                    value="{{ afaRole.id }}" [ngValue]="afaRole.id"
                    >{{afaRole.userTier}} - {{ afaRole.id }}</option>
            </select>
            <div *ngIf="submitted && f.afaRole.errors" class="invalid-feedback">
                <div *ngIf="f.afaRole.errors.required">A Role is required</div>
            </div>
        </div>
    </div> -->

    <div class="form-group">
        <label>Alarm Connections Employee</label>
        <div class="dropdown">
            <select 
                formControlName="afaEmployee"
                class="form-control ml-3"
                [ngClass]="{'is-invalid': submitted && f.afaEmployee.errors}">
                <option
                    *ngFor="let afaEmployee of afaEmployee"
                    value="{{ afaEmployee.id }}" [ngValue]="afaEmployee.id"
                    >{{afaEmployee.isAFAEmployee}} - {{ afaEmployee.id }}</option>
            </select>
            <div *ngIf="submitted && f.afaEmployee.errors" class="invalid-feedback">
                <div *ngIf="f.afaEmployee.errors.required">An employee status is required</div>
            </div>
        </div>
    </div>

    <div class="form-group">
        <label>Password</label>
        <input 
            type="password"
            formControlName="password"
            class="form-control"
            [ngClass]="{ 'is-invalid': submitted && f.password.errors }"
        />
        <div *ngIf="submitted && f.password.errors" class="invalid-feedback">
            <div *ngIf="f.password.errors.required">Password is required</div>
            <div *ngIf="f.password.errors.minlength">
                Password must be at least 6 characters
            </div>
            </div>
    </div>
    <div class="form-group">
        <label>Confirm Password</label>
        <input
            type="password"
            formControlName="confirmPassword"
            class="form-control"
            [ngClass]="{ 'is-invalid': submitted && f.confirmPassword.errors }"
        />
        <div *ngIf="submitted && f.confirmPassword.errors" class="invalid-feedback">
            <div *ngIf="f.confirmPassword.errors.required">
            Confirm Password is required
            </div>
            <div *ngIf="f.confirmPassword.errors.mustMatch">
            Passwords must match
            </div>
        </div>
    </div>
    <div class="text-center">
        <button class="btn btn-primary mr-5">Register</button>
        <button class="btn btn-secondary" type="reset" (click)="onReset()">
            Cancel
        </button>
        </div>
</form>
</div>

