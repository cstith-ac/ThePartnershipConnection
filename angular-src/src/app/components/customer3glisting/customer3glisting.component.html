<div class="card">
  <div class="card-body">
    <kendo-grid
      [kendoGridBinding]="gridData"
      [pageSize]="$any(state).take"
      [skip]="$any(state).skip"
      [sort]="$any(state).sort"
      [filter]="$any(state).filter"
      [sortable]="{
        allowUnsort: true,
        mode: 'multiple'
      }"
      [pageable]="{
        pageSizes: [5,10,15,25,50,100,150,200]
      }"
      [filterable]="true"
      [resizable]="true"
      [pageSize]="pageSize"
      [groupable]="true"
      [columnMenu]="true"
      [selectable]="true"
      (selectionChange)="onOpenDetails3gModal($event, customer_System_Id)"
      kendoGridSelectBy="customer_System_Id"
      [selectedKeys]="mySelection"
      #dateTime
    >
    <ng-template kendoGridToolbarTemplate *ngIf="hide3GExcelExport == true">
      <button 
        type="button" 
        kendoGridExcelCommand 
        icon="file-excel"
      >Export to Excel
      </button>
    </ng-template>
    <!-- <ng-template kendoGridToolbarTemplate *ngIf="hide3GExcelExport == false">
        <p>You don't have permission to view this feature</p>
    </ng-template> -->
    <kendo-grid-column-group 
      [title]="today"
      [autoSize]="true"
      #dateTime>
      <ng-template kendoGridHeaderTemplate let-column let-columnIndex="columnIndex">
        <p [innerHTML]="today" class="mb-0"></p>
      </ng-template>
      <kendo-grid-column field="customer_System_Id" title="Customer System Id" [hidden]="true"></kendo-grid-column>
      <kendo-grid-column 
        field="alarm_Account" 
        title="Alarm Account" 
        [style]="{color: '#ca5856'}">
      </kendo-grid-column>
      <kendo-grid-column field="customer_Number" title="Customer Number"></kendo-grid-column>
      <kendo-grid-column field="customer_Name" title="Customer Name"></kendo-grid-column>
      <kendo-grid-column field="customerType" title="Customer Type"></kendo-grid-column>
      <kendo-grid-column field="siteName" title="Site Name"></kendo-grid-column>
      <kendo-grid-column field="address_1" title="Address 1"></kendo-grid-column>
      <kendo-grid-column field="city" title="City"></kendo-grid-column>
      <kendo-grid-column field="state" title="State"></kendo-grid-column>
      <kendo-grid-column field="zipCode" title="Zip Code"></kendo-grid-column>
      <kendo-grid-column field="panel_Type_Code" title="Panel Type"></kendo-grid-column>
      <kendo-grid-column field="system_Code" title="System Type"></kendo-grid-column>
      <kendo-grid-column field="cellType" title="Cell Type"></kendo-grid-column>
      <kendo-grid-column field="cellGeneration" title="Cell Generation"></kendo-grid-column>
      <kendo-grid-column field="cellModel" title="Cell Model"></kendo-grid-column>
      <kendo-grid-column field="carrier" title="Carrier"></kendo-grid-column>
      <kendo-grid-column field="rmrAtCustomer" title="Customer RMR" format="{0:c}"></kendo-grid-column>
    </kendo-grid-column-group>
    <kendo-grid-excel fileName="customer3glisting" [fetchData]="allData">
    </kendo-grid-excel>
    </kendo-grid>
  </div>
</div>

<ngx-spinner bdColor="rgba(51, 51, 51, 0.8)" size="default" type="ball-spin-clockwise">  
  <p style="color: white">Please Wait...</p>  
</ngx-spinner>

<!-- 3G Details Modal -->
<div class="modal fade" id="details3gModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" id="maxWidth-1160">
      <div class="modal-content">
          <div class="modal-header pb-0 pl-2">
              <div class="col-md-12 mb-2">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
              </div>
          </div>
          <div class="modal-body pt-0">
              <div class="card p-3">
                  <div class="card-body">
                      <div class="row">
                          <div class="col">
                              <p >
                                  <span class="body-2 medium-emphasis mr-2">{{ customer_Number }}</span> 
                                  <span class="body-2 medium-emphasis">{{ customer_Name }}</span>
                              </p>
                              <p>
                                  <span class="body-2 medium-emphasis">{{ customerType }}</span>
                              </p>
                              <p >
                                  <span class="body-2 medium-emphasis">{{ customerPhone | phone }}</span> 
                              </p>
                              <p>
                                  <span class="body-2">
                                      <a href="mailto:{{customerEmail}}" class="hyperlink">{{ customerEmail }}</a>
                                    </span>
                              </p>
                              
                              
                          </div>
                          <div class="col">
                              <p >
                                  <span class="subtitle-2 high-emphasis">Customer RMR </span>
                                  <span class="body-2 medium-emphasis">{{ rmrAtCustomer  | currency }}</span>
                              </p>
                             
                          </div>
                          <div class="col">
                              <button type="submit" class="btn btn-block btn-secondary" (click)="onOpenMessageModal()"><i class="fas fa-plus pr-2"></i>Message</button>
                          </div>
                          
                      </div>
                      <div class="row mt-2">
                          <div class="col-6">
                            <div class="card">
                                <div class="card-body">
                                    <div class="">
                                        <div class="row">
                                            <div class="col">
                                                <p >
                                                    <span class="body-2 medium-emphasis">{{ siteName }}</span>
                                                </p>
                                            </div>
                                            <div class="col">
                                                <p >
                                                    <span class="body-2 medium-emphasis">{{ sitePhone | phone }}</span>
                                                </p>
                                            </div>
                                        </div>
                                        
                                        <div class="row">
                                            <div class="col">
                                                <p>
                                                    <span class="body-2 medium-emphasis">{{ address_1 }}</span>
                                                </p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                <p >
                                                    <span class="body-2 medium-emphasis">{{ address_2 }}</span>
                                                </p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                <p>
                                                    <span class="body-2 medium-emphasis">{{ address_3 }}</span>
                                                </p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                <!-- <p>
                                                    <span class="body-2">{{ city }}, {{ state_3g }}, {{ zipCode}}</span>
                                                </p> -->
                                                <p> 
                                                    <span class="body-2 medium-emphasis">{{ city }}, </span>
                                                    <span class="body-2 medium-emphasis mr-2">{{ state_3g }}</span>
                                                    <span class="body-2 medium-emphasis">{{ zipCode }}</span>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                          </div>
                          <div class="col d-flex align-items-stretch">
                            <div class="card">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col">
                                            <p>Offer 1</p>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p >
                                                <span class="body-2 medium-emphasis">{{ offer1 }}</span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                          </div>
                          <div class="col d-flex align-items-stretch">
                            <div class="card">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col">
                                            <p>Offer 2</p>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p >
                                                <span class="body-2 medium-emphasis">{{ offer2 }}</span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                          </div>
                      </div>
                      <div class="row mt-2">
                          <div class="col d-flex align-items-stretch">
                              <div class="card">
                                  <!-- <div class="card-header"></div> -->
                                  <div class="card-body">
                                    <div class="row">
                                        <div class="col">
                                            <p>System Information</p>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p>
                                                <span class="subtitle-2 high-emphasis">CS Account # </span>
                                                <span class="body-2 medium-emphasis">{{ alarm_Account }}</span>
                                            </p>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p>
                                                <span class="subtitle-2 high-emphasis">Panel Type </span>
                                                <span class="body-2 medium-emphasis">{{ panel_Type_Code }}</span>
                                            </p>
                                            <!-- <p class="body-2 high-emphasis">{{ panel_Type_Code }}</p> -->
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p>
                                                <span class="subtitle-2 high-emphasis">System Type </span>
                                                <span class="body-2 medium-emphasis">{{ system_Code }}</span>
                                            </p>
                                            <!-- <p class="body-2 high-emphasis">{{ system_Code }}</p> -->
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p>
                                                <span class="subtitle-2 high-emphasis">Panel Location </span>
                                                <span class="body-2 medium-emphasis">{{ panel_Location }}</span>
                                            </p>
                                            <!-- <p class="body-2 high-emphasis">{{ panel_Location }}</p> -->
                                        </div>
                                    </div>
                                  </div>
                              </div>
                          </div>
                          <div class="col d-flex align-items-stretch">
                            <div class="card">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col">
                                            <p>3G Information</p>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <span class="subtitle-2 high-emphasis">Carrier  </span>
                                                <span class="body-2 medium-emphasis">{{ carrier }}</span>
                                            <!-- <p>Carrier</p> -->
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <span class="subtitle-2 high-emphasis">Cell Model  </span>
                                            <span class="body-2 medium-emphasis">{{ cellModel }}</span>
                                            <!-- <p>Cell Model</p> -->
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <span class="subtitle-2 high-emphasis">Cell Generation  </span>
                                            <span class="body-2 medium-emphasis">{{ cellGeneration }}</span>
                                            <!-- <p>Cell Generation</p> -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                          </div>
                          <div class="col d-flex align-items-stretch">
                            <div class="card">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col">
                                            <p>Offer 3</p>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p >
                                                <span class="body-2 medium-emphasis">{{ offer3 }}</span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                          </div>
                          <div class="col d-flex align-items-stretch">
                            <div class="card">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col">
                                            <p>Offer 4</p>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p >
                                                <span class="body-2 medium-emphasis">{{ offer4 }}</span>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
          <div class="modal-footer">
          </div>
      </div>
  </div>
</div>

<!-- Message Modal -->
<div class="modal fade" id="messageModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" id="maxWidth-900">
        <div class="modal-content">
            <div class="modal-header pb-0 pl-2">
                <div class="col-md-12 mb-2">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            </div>
            <div class="modal-body pt-0">
                <div class="card p-3">
                    <div class="card-body p-0">
                      <form [formGroup]="customer3gListingForm">
                        <div class="row">
                          <div class="col-md-12">
                            <div class="form-group">
                              <label class="col-form-label headline-6 medium-emphasis">Memo</label>
                              <textarea 
                                formControlName="Memo"
                                class="form-control" 
                                cols="30" 
                                rows="10">
                              </textarea>
                            </div>
                            <div class="row">
                              <div class="col-md-12">
                                <button type="submit" class="btn btn-secondary" (click)="onSubmit3gListingMessage(customer3gListingForm);clicked = true;" [disabled]="clicked"><i class="fas fa-plus pr-2"></i>Submit</button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </form>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>