<div class="container">
    <div class="row mt-5">
        <div class="col-md-12">
            <h5 class="headline-5 high-emphasis">Customer Aging List</h5>
        </div>
    </div>
    <div class="row mt-5">
        <div class="col">
            <p class="medium-emphasis overline text-error mark p-2">Accounts that are 120 days past due will be cancelled at the end of the month if payment is not received!</p>
        </div>
        <div class="col">
            <p class="medium-emphasis overline p-2">We need your cooperation reaching out to customers with past due amounts. We have been trying and are not getting answers nor payments. It is of the utmost importance that we work together with our clients to collect funds.</p>
            <p class="medium-emphasis overline p-2">Should your office receive a payment from one of these accounts or have additional information, please contact us by selecting the line below and clicking the <span class="text-uppercase">message</span> button provided.</p>
        </div>
    </div>
    <!-- <div class="row">
        <input type="text" (input)="search($event.target.value)">
    </div> -->
    <div class="row">
        <div class="col-12">
            <h5 class="headline-5 high-emphasis">Filter Listing Based On</h5>
        </div>

        <div class="col-sm mt-5">
            <kendo-buttongroup selection="single">
                <button 
                    kendoButton 
                    
                    [toggleable]="true" 
                    class="btn btn-secondary" 
                    (click)="onClick120Day($event)"
                    style="border-radius: 50px;"
                    #onClick120DayElement
                >120 Day</button>
                <button 
                    kendoButton 
                    [toggleable]="true" 
                    class="btn btn-secondary"
                    (click)="onClick90Day($event)"
                    #onClick90DayElement 
                >90 Day</button>
                <button 
                    kendoButton 
                    [toggleable]="true" 
                    class="btn btn-secondary"
                    (click)="onClickHighRMR($event.target.value)"
                    #onClickHighRMRElement
                >*High RMR*</button>
                <button 
                    kendoButton 
                    [toggleable]="true" 
                    class="btn btn-secondary"
                    (click)="onClickPendingCancel($event.target.value)"
                    #onClickPendingCancelElement
                >Pending Cancel</button>
                <button 
                    kendoButton 
                    [toggleable]="true" 
                    class="btn btn-secondary"
                    (click)="onClick60Day($event.target.value)"
                    #onClick60DayElement
                >60 Day</button>
                <button 
                    kendoButton 
                    [toggleable]="true" 
                    class="btn btn-secondary"
                    (click)="onClick30Day($event.target.value)"
                    #onClick30DayElement
                >30 Day</button>
                <button 
                    kendoButton 
                    [toggleable]="true" 
                    class="btn btn-secondary"
                    (click)="onClickRMT($event.target.value)"
                    #onClickRMTElement
                >RMT</button>
                <button 
                    kendoButton 
                    [toggleable]="true" 
                    class="btn btn-secondary"
                    (click)="onClickAllCustomers($event.target.value)"
                    style="border-radius: 50px;"
                    #onClickAllCustomersElement
                >All Customers</button>
            </kendo-buttongroup>
        </div>
        

        <!-- <div class="col-sm mt-5">
            <button 
                type="button"
                class="btn btn-secondary active" 
                value="120" 
                #onClick120DayElement 
                (click)="onClick120Day($event)"
                [ngClass]="{'active': toggle120}"
            >120 Day</button>
        </div>
        <div class="col-sm mt-5">
            <button 
                type="button"
                class="btn btn-secondary" 
                value="90" 
                #onClick90DayElement 
                (click)="onClick90Day($event.target.value)"
                [ngClass]="{'active': toggle90}"
            >90 Day</button>
        </div>
        <div class="col-sm mt-5">
            <button 
                type="button"
                class="btn btn-secondary" 
                value="high"
                #onClickHighRMRElement
                (click)="onClickHighRMR($event.target.value)"
                [ngClass]="{'active': toggleHigh}"
            >*High RMR*</button>
        </div>
        <div class="col-sm mt-5">
            <button 
                type="button"
                class="btn btn-secondary" 
                value="pending"
                #onClickPendingCancelElement
                (click)="onClickPendingCancel($event.target.value)"
                [ngClass]="{'active': togglePending}"
            >Pending Cancel</button>
        </div>
        <div class="col-sm mt-5">
            <button 
                type="button"
                class="btn btn-secondary" 
                value="60"
                #onClick60DayElement
                (click)="onClick60Day($event.target.value)"
                [ngClass]="{'active': toggle60}"
            >60 Day</button>
        </div>
        <div class="col-sm mt-5">
            <button 
                type="button"
                class="btn btn-secondary" 
                value="30"
                #onClick30DayElement
                (click)="onClick30Day($event.target.value)"
                [ngClass]="{'active': toggle30}"
            >30 Day</button>
        </div>
        <div class="col-sm mt-5">
            <button 
                type="button"
                class="btn btn-secondary" 
                value="rmt"
                #onClickRMTElement
                (click)="onClickRMT($event.target.value)"
                [ngClass]="{'active': toggleRMT}"
            >RMT</button>
        </div>
        <div class="col-sm mt-5">
            <button 
                type="button"
                class="btn btn-secondary" 
                value="all"
                #onClickAllCustomersElement
                (click)="onClickAllCustomers($event.target.value)"
                [ngClass]="{'active': toggleAll}"
            >All Customers</button>
        </div> -->
    </div>
    <div class="row mt-5">
        <div class="col">
            <form [formGroup]="agingListForm">
                <div class="form-inline">
                    <label class="high-emphasis subtitle-2 mr-2">Minimum Amount Due</label>
                    <!-- <input type="number" formControlName="minimumAmountDue" class="ml-2"> -->
                    <kendo-numerictextbox
                            format="c2"
                            [value]="value"
                            placeholder="$5.00"
                            formControlName="minimumAmountDue"
                            [spinners]="false"
                            (input)="searchMinimumAmountDue($event.target.value)"
                    ></kendo-numerictextbox>
                    <button class="btn bg-error ml-2" (click)="resetMinimumAmountDue()">Reset</button>
                </div>
            </form>
        </div>
    </div>
    <div class="row mt-5">
        <div class="col-md-12">
            <table class="table table-striped table-responsive">
                <thead>
                    <tr>
                        <th scope="col">Customer Number</th>
                        <th scope="col">Customer Name</th>
                        <th scope="col">Active RMR</th>
                        <th scope="col">Customer Since</th>
                        <th scope="col">Last Payment On</th>
                        <th scope="col">Past Due</th>
                        <th scope="col">Total Due</th>
                        <th scope="col">Collection Status</th>
                        <th scope="col">Pending Cancellation</th>
                        <th scope="col">Commercial Account</th>
                        <th scope="col">Guarantee Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of tpcPartnerAgingReport | slice: (page-1) * pageSize : (page-1) * pageSize + pageSize">
                        <td id="{{ item.customer_Id }}" (click)="onOpenPartnerAgingReportModal(item.customer_Id, item.customer_Number, item.customer_Name, item.activeRMR, item.filterCategory, item.customerSince, item.lastPay, item.lastPayAmount, item.pastDue, item.bal_Current, item.totalDue, item.collectionQueue, item.pendingCancellation, item.commercialAccount, item.guaranteeStatus, item.address_1, item.address_2, item.address_3, item.city, item.state, item.zipCode, item.emailAddress, item.primaryPhone, item.alternatePhone )">{{ item.customer_Number }}</td>
                        <td>{{ item.customer_Name }}</td>
                        <td>{{ item.activeRMR | currency }}</td>
                        <td>{{ item.customerSince }}</td>
                        <td>{{ item.lastPay }}</td>
                        <td>{{ item.pastDue | currency }}</td>
                        <td>{{ item.totalDue | currency }}</td>
                        <td>{{ item.collectionQueue }}</td>
                        <td>{{ item.pendingCancellation }}</td>
                        <td>{{ item.commercialAccount }}</td>
                        <td>{{ item.guaranteeStatus }}</td>
                    </tr>
                </tbody>
            </table>
            <ngb-pagination
                [collectionSize]="tpcPartnerAgingReport?.length"
                [(page)]="page" 
                [maxSize]="5" 
                [rotate]="true" 
                [ellipses]="false" 
                [boundaryLinks]="true"
                class="d-flex justify-content-center mt-5">
            </ngb-pagination>
        </div>
    </div>
</div>

<ngx-spinner bdColor="rgba(51, 51, 51, 0.8)" size="default" type="ball-spin-clockwise">  
    <p style="color: white">Please Wait...</p>  
</ngx-spinner>

<!-- Partner Aging Report Details Modal -->
<div class="modal fade" id="detailsModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" id="maxWidth-1560">
        <div class="modal-content">
            <div class="modal-header pb-0 pl-2">
                <div class="col-md-12">
                    <!-- <h2 class="modal-title text" id="exampleModalLabel">Message</h2> -->
                </div>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body pt-0">
                <div class="card p-3">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-1">
                                <p class="mb-0">
                                    <span class="subtitle-2">#{{ customer_Number }}</span> 
                                </p>
                               
                            </div>
                            <div class="col">
                                <p class="mb-0">
                                    <span class="subtitle-2">{{ customer_Name }}</span>
                                </p>
                                
                            </div>

                            <div class="col">
                                <p class="mb-0">
                                    <span class="subtitle-2">Monthly RMR</span>
                                </p>
                                <p>
                                    <span class="body-2">{{ activeRMR | currency }}</span>
                                </p>
                            </div>

                            <div class="col">
                                <p class="mb-0">
                                    <span class="subtitle-2">Customer Since</span>
                                </p>
                                <p>
                                    <span class="body-2">{{ customerSince }}</span>
                                </p>
                            </div>
                            <div class="col">
                                <p class="mb-0">
                                    <span class="subtitle-2">Last Payment</span>
                                </p>
                                <p>
                                    <span class="body-2">{{ lastPayAmount | currency }} on {{ lastPay }}</span>
                                </p>
                                
                            </div>
                            <div class="col">
                                <p class="mb-0">
                                    <span class="subtitle-2">{{ commercialAccount }}</span>
                                </p>
                                <p class="mb-0">
                                    <span class="subtitle-2 text-error">{{ guaranteeStatus }}</span>
                                </p>
                                
                            </div>
                            
                        </div>
                        <div class="row">
                            <div class="col">
                                <p>
                                    <span class="subtitle-2 mr-2">Past Due Balance</span>
                                    <span class="body-2 text-error">{{ pastDue | currency }}</span>
                                </p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <p>
                                    <span class="subtitle-2 mr-2">Collection Status</span>
                                    <span class="body-2">{{ collectionQueue }}</span>
                                </p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <p>
                                    <span class="subtitle-2 mr-2">Total Balance</span>
                                    <span class="body-2">{{ bal_Current | currency }}</span>
                                </p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-4 border-aging-report">
                                
                                <p>
                                    <span class="body-2">{{ address_1 }}</span>
                                </p>
                                
                                <p>
                                    <span class="body-2">{{ address_2 }}</span>
                                </p>
                                <p>
                                    <span class="body-2">{{ address_3 }}</span>
                                </p>
                                <p>
                                    <span class="body-2">{{ city }}, {{ state }} {{ zipCode }}</span>
                                </p>
                                <p>
                                    <span class="body-2">{{ emailAddress }}</span>
                                </p>
                                <p>
                                    <span class="body-2">{{ primaryPhone | phone }}</span>
                                </p>
                                <p>
                                    <span class="body-2">{{ alternatePhone | phone }}</span>
                                </p>
                            </div>
                            <div class="col-8">
                                <div class="row">
                                    <div class="col-md-3 offset-md-10 mb-2">
                                        <button type="submit" class="btn btn-secondary text-uppercase" (click)="onSubmitMessage()"><i class="fas fa-plus pr-2"></i>Message</button>
                                    </div>
                                </div>
                                
                                <div class="row border-aging-report">
                                    <div class="col">
                                        <p class="mb-0">
                                            <span class="subtitle-2">Current</span>
                                        </p>
                                        <p>
                                            <span class="body-2">$0.00</span>
                                        </p>
                                    </div>
                                    <div class="col">
                                        <p class="mb-0">
                                            <span class="subtitle-2">1-30 Days</span>
                                        </p>
                                        <p>
                                            <span class="body-2">$35.00</span>
                                        </p>
                                    </div>
                                    <div class="col">
                                        <p class="mb-0">
                                            <span class="subtitle-2">31-60 Days</span>
                                        </p>
                                        <p>
                                            <span class="body-2">$0.00</span>
                                        </p>
                                    </div>
                                    <div class="col">
                                        <p class="mb-0">
                                            <span class="subtitle-2">61-90 Days</span>
                                        </p>
                                        <p>
                                            <span class="body-2">$35.00</span>
                                        </p>
                                    </div>
                                    <div class="col">
                                        <p class="mb-0">
                                            <span class="subtitle-2">91-120 Days</span>
                                        </p>
                                        <p>
                                            <span class="body-2">$20.00</span>
                                        </p>
                                    </div>
                                    <div class="col">
                                        <p class="mb-0">
                                            <span class="subtitle-2">Over 120</span>
                                        </p>
                                        <p>
                                            <span class="body-2">$20.00</span>
                                        </p>
                                    </div>
                                    <div class="col">
                                        <p class="mb-0">
                                            <span class="subtitle-2">Avail Credit</span>
                                        </p>
                                        <p>
                                            <span class="body-2">$0.00</span>
                                        </p>
                                    </div>
                                    <div class="col">
                                        <p class="mb-0">
                                            <span class="subtitle-2">Avail Cash</span>
                                        </p>
                                        <p>
                                            <span class="body-2">$0.00</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
