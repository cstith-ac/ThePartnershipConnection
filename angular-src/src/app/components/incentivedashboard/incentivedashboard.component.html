<div class="flashMessage">
    <flash-messages></flash-messages>
</div>
<div class="card">
    <div class="card-body">
        <div class="row ml-0">
            <div class="col-md-12">
                <div class="row">
                    <h1 class="incentive-header">Invoice Entry | 
                        <span class="company text-error">{{ companyName }} - {{ partnerCode }}</span>
                    </h1>
                </div>
            </div>
        </div>
        <form [formGroup]="incentiveDashboardForm">
            <div class="col-md-12">
                <div class="row">
                    <div class="col-md-5 mt-1_8">
                        <!--CUSTOMER-->
                        <div class="form-group form-inline">
                            <label class="col-sm-2 col-form-label">Customer</label>                           
                            <div class="ng-autocomplete" *ngIf="!customerPreselected">
                                <input 
                                    type="text" 
                                    id="typeahead-basic" 
                                    class="form-control fullWidthInput"
                                    formControlName="CustomerID"
                                    [placeholder]="'Type a customer number...'"
                                    [ngbTypeahead]="search"
                                    [resultFormatter]="resultFormatCustomerListValue" 
                                    [inputFormatter]="inputFormatCustomerListValue"
                                    (change)="onChangeFocus($event)"
                                    (keydown)="delete($event)"
                                >
                                <div class="mt-1">
                                    <small class="text-error d-none" *ngIf="this.incentiveDashboardForm.get('CustomerID').errors && this.incentiveDashboardForm.get('CustomerID').hasError('required') && this.customerIDValidated">* Please enter or select the customer.</small>
                                </div>
                            </div>
                            <div *ngIf="customerPreselected">
                                <input  
                                    readonly
                                    type="text"
                                    class="form-control col-sm readOnlyInput" 
                                    [(ngModel)]="customer" 
                                    [ngModelOptions]="{standalone: true}">
                            </div>

                            <span class="ml-2" #customerSearchIcon (click)="openSearchCustomerModal(content)" *ngIf="!customerPreselected">
                                <i class="fas fa-search"></i>
                            </span>

                            <!-- <button class="btn btn-error" *ngIf="customerSearch && !isCustomerSearchResetButton" (click)="onResetCustomer()">
                                <i class="fas fa-redo"></i>Reset
                            </button> -->
                         
                            <span class="pl-4" (click)="routeToNewCustomer()" *ngIf="!customerPreselected || !customerSearch">
                                <i class="fas fa-plus-circle"></i>
                                New Customer
                            </span>
                        </div>
                        
                        <!--SITE-->
                        <div class="form-group form-inline mb-0" [ngStyle]="{marginTop: '1.5rem'}">
                            <label class="col-sm-2 col-form-label">Site</label>
                            <div class="siteWidth">
                                <div *ngIf="isSiteSelectionFirst">
                                    <input 
                                    readonly
                                        type="text" 
                                        class="form-control col-sm-12 fullWidthInput" 
                                        [(ngModel)]="siteName" 
                                        formControlName="CustomerSiteID"
                                    >
                                </div>
                                <div *ngIf="isRemoveDropdown">
                                    <div class="dropdown">
                                        <select 
                                            #siteRef
                                            [(ngbTooltip)]="customerSiteName"
                                            formControlName="CustomerSiteID" 
                                            class="form-control col-sm-12 fullWidthSelect" 
                                            [(ngModel)]="siteName"
                                            (change)="onChangeSite($event)" 
                                        >
                                            <option 
                                                *ngFor="let site of listsitesforcustomer" 
                                                value="{{ site.customer_Site_id }}" 
                                                
                                            >
                                                {{ site.siteName }} - {{ site.address_1 }}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <span class="ml-2" #siteSearchIcon (click)="openSearchSiteModal(site)">
                                <i class="fas fa-search"></i>
                            </span>
                            <span class="pl-4" #newSiteDisplay (click)="routeToNewSite()">
                                <i class="fas fa-plus-circle"></i>
                                New Site
                            </span>
                        </div>
                        
                        <!--SYSTEM-->
                        <div class="form-group form-inline mb-0 mt-3">
                            <label class="col-sm-2 col-form-label">System</label>
                            <div class="systemWidth">
                                <div *ngIf="isSystemSelectionFirst">
                                    <input
                                        readonly 
                                        type="text" 
                                        class="form-control col-sm-12 fullWidthInput" 
                                        [(ngModel)]="systemCode" 
                                        formControlName="CustomerSystemID"
                                    >
                                </div>
                                <div *ngIf="isRemoveSystemDropdown">
                                    <div class="dropdown">
                                        <select 
                                            #systemRef
                                            formControlName="CustomerSystemID" 
                                            class="form-control col-sm-12 fullWidthSelect"
                                            [(ngModel)]="selectedValue"
                                            (change)="onChangeSystem($event)"
                                        >
                                            <option 
                                                *ngFor="let system of listSystemsForSite" 
                                                value="{{ system.customer_System_id }}" 
                                            >
                                                {{ system.systemType }} - {{  system.alarmAccount }}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <span class="ml-2" #systemSearchIcon (click)="openSearchSystemModal(system)">
                                <i class="fas fa-search"></i>
                            </span>
                            <input 
                                #newSystemDisplayCheckbox
                                type="checkbox" 
                                class="form-control form-check-input ml-3" 
                                [(ngModel)]="newSystem" 
                                formControlName="NewSystem"
                                (change)="onChangeNewSystem($event)"
                            >
                            <label 
                                class="col-sm-2 col-form-label form-check-label" #newSystemDisplayLabel
                            >This is a new system</label>
                        </div>

                        <div class="form-group form-inline" *ngIf="ticket_NumberPreSelected">
                            <label class="col-sm-2 col-form-label">Alarm Connections Ticket #</label>
                            <input readonly type="text" class="form-control col-sm-5" placeholder="..." formControlName="TicketNumber">
                        </div>

                        <div class="form-group form-inline mb-0">
                            <p class="text-error">Verify System Information! <small *ngIf="systemPopUp">To ensure accuracy, please check your system and account number</small></p>
                        </div>
                        <div class="form-group form-inline">
                            <label class="col-sm-2 col-form-label">Account #</label>

                            <input *ngIf="!alarmAccountPreSelected" type="text" class="form-control col-sm-5" [(ngModel)]="alarmAccount" formControlName="AlarmAccount">
                            <input *ngIf="alarmAccountPreSelected" type="text" class="form-control col-sm-5" [(ngModel)]="alarmAccount" formControlName="AlarmAccount">
                        </div>
                        <div class="form-group form-inline">
                            <label class="col-sm-2 col-form-label">System Type</label>
                            <div class="dropdown" *ngIf="!systemTypePreselected">
                                <select 
                                    formControlName="SystemTypeID" 
                                    class="form-control col-sm-12 fullWidthSelect" 
                                    [(ngModel)]="systemTypeID"
                                    (change)="onChangeGetSystemType($event)"
                                >
                                    <option 
                                        *ngFor="let list of listsystemtypes" 
                                        value="{{ list.system_Id }}" 
                                        [ngValue]="list.system_Id">
                                        {{ list.systemName }}
                                    </option>
                                </select>
                            </div>
                            <div *ngIf="systemTypePreselected">
                                <input
                                    type="text" 
                                    class="form-control col-sm" 
                                    [(ngModel)]="systemTypeID"
                                    [ngModelOptions]="{standalone: true}"
                                    (change)="onChangeSystemType($event)">
                                <i class="pl-3 far fa-trash-alt text-danger" (click)="onClickRemoveSystemType()"
                                ></i>
                            </div>
                            <span class="col-sm-4">
                                <small>If <b>Other</b> is selected, please describe in Comments Section</small>
                            </span>
                        </div>
                        <div class="form-group form-inline" [ngStyle]="{marginBottom: '0.5rem'}">
                            <label class="col-sm-2 col-form-label">Panel Type</label>
                            <div class="dropdown" *ngIf="!panelTypePreselected">
                                <select 
                                    formControlName="PanelTypeID" 
                                    class="form-control col-sm-12 fullWidthSelect" 
                                    [(ngModel)]="panelTypeID"
                                    (change)="onChangeGetPanelType($event)"
                                >
                                    <option *ngFor="let list of listpaneltypes" value="{{ list.panel_Type_Id }}">
                                        {{ list.panelName }}
                                    </option>
                                </select>
                            </div>
                            <div *ngIf="panelTypePreselected">
                                <input 
                                    type="text" 
                                    class="form-control col-sm" 
                                    [(ngModel)]="panelTypeID"
                                    [ngModelOptions]="{standalone: true}">
                            </div>
                            <span class="col-sm-4">
                                <small>If <b>Other</b> is selected, please describe in Comments Section</small>
                            </span>
                        </div>
                        <div class="form-group form-inline" [ngStyle]="{marginBottom: '0.2rem'}">
                            <label class="col-sm-2 col-form-label">Panel Location</label>
                            <input *ngIf="!panelLocationPreSelected" type="text" class="form-control col-sm-5" [(ngModel)]="panel_Location" formControlName="PanelLocation">
                            <input *ngIf="panelLocationPreSelected" type="text" class="form-control col-sm-5" [(ngModel)]="panel_Location" formControlName="PanelLocation">
                        </div>
                        <div class="form-group form-inline" [ngStyle]="{marginBottom: '0.5rem'}">
                            <label class="col-sm-2 col-form-label">Central Station</label>
                            <div class="dropdown" *ngIf="!centralStationPreselected">
                                <select 
                                    formControlName="CentralStationID" class="form-control col-sm-12 fullWidthSelect" 
                                    [(ngModel)]="centralStationID"
                                    (change)="onChangeGetCentralStation($event)"
                                >
                                    <option *ngFor="let station of listcentralstations" value="{{ station.centralStationID }}" [ngValue]="station.centralStationID">
                                        {{ station.csName }}
                                    </option>
                                </select>
                            </div>
                            <div *ngIf="centralStationPreselected">
                                <input
                                    type="text" 
                                    class="form-control col-sm" 
                                    [(ngModel)]="centralStationID"
                                    [ngModelOptions]="{standalone: true}">
                            </div>
                            <span class="col-sm-4">
                                <small>If <b>Other</b> is selected, please describe in Comments Section</small>
                            </span>
                        </div>
                        <div class="form-group form-inline">
                            <label class="col-sm-2 col-form-label">Additional Info</label>
                            <input 
                                type="text"
                                maxlength="50" 
                                class="form-control col-sm-5" 
                                [(ngModel)]="additionalInfo" formControlName="AdditionalInfo" 
                                (keyup)="getAdditionalInfo($event)"
                            >
                            <!-- <textarea 
                                cols="30" 
                                rows="2"
                                class="form-control col-sm-5" 
                                [(ngModel)]="additionalInfo" formControlName="AdditionalInfo" 
                                (keyup)="getAdditionalInfo($event)"
                            ></textarea> -->
                        </div>

                        <div class="form-group form-inline mb-0">
                            <p class="text-error">Customer Email Information</p>
                        </div>
                        <div class="form-group form-inline">
                            <label class="col-sm-2 col-form-label">Email Address</label>

                            <input  
                                type="text" 
                                class="form-control col-sm-5" 
                                [(ngModel)]="customerEmailAddress"
                                formControlName="CustomerEmailAddress"
                            >

                            <label class="ml-3">Enroll in Emailed Invoices</label>
                            <input 
                                type="checkbox"
                                class="form-control form-check-input ml-3"
                                [(ngModel)]="enrollInEmailInvoices"
                                formControlName="EnrollInEmailInvoices"
                            >
                        </div>
                    </div>
                    <div class="col-md-7">
                        <div class="shadow">
                            <div class="row">
                                <div class="col-md-6">
                                    <h3>
                                        Upload Documents - (An invoice submission is required)
                                    </h3>
                                </div>
                                <div class="col-md-6" *ngIf="showInvoiceFile || showSubscriberFormFile || showSiteVisitFile || showOtherDocument1File || showContractFile ||showOtherDocument2File" >
                                    <h3>
                                        Documents Available 
                                        <i class="fa fa-eye text-success pl-3" (click)="onOpenDocumentsModal(documentUpload)" [(ngbTooltip)]="viewAvailableDocuments"></i>
                                    </h3>
                                </div>
                            </div>
                            <div class="row form-inline mb-3">
                                <div class="col-md-6">
                                    <div class="form-group" >
                                        <label class="col-sm-4 col-form-label pl-0">Invoice</label>
                                        <i class="fas fa-upload pr-3" *ngIf="!showInvoiceFile"></i>
                                        <i *ngIf="showInvoiceFile" class="fas fa-check pr-3 text-success"></i>
                                        <input 
                                            type="file" 
                                            class="form-control col-sm-6" 
                                            
                                            formControlName="InvoiceUpload"
                                            (change)="getInvoiceFileDetails($event)"
                                        >
                                        <i 
                                            *ngIf="showInvoiceFile"
                                            class="pl-3 far fa-trash-alt text-danger" 
                                            (click)="removeInvoiceFile()"
                                        ></i>
                                    </div>
                                </div>
    
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="col-sm-4 col-form-label">Work Order</label>
                                        <i class="fas fa-upload pr-3" *ngIf="!showSubscriberFormFile"></i>
                                        <i *ngIf="showSubscriberFormFile" class="fas fa-check pr-3 text-success"></i>
                                        <input 
                                            type="file" 
                                            class="form-control col-sm-6" 
                                             
                                            formControlName="SubscriberFormUpload"
                                            (change)="getSubscriberFileDetails($event)"
                                        >
                                        <i 
                                            *ngIf="showSubscriberFormFile"
                                            class="pl-3 far fa-trash-alt text-danger" 
                                            (click)="removeSubscriberFormFile()"
                                        ></i>
                                    </div>
                                </div>
                            </div>
                            <div class="row form-inline mb-3">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="col-sm-4 col-form-label pl-0">Customer Visit</label>
                                        <i class="fas fa-upload pr-3" *ngIf="!showSiteVisitFile"></i>
                                        <i *ngIf="showSiteVisitFile" class="fas fa-check pr-3 text-success"></i>
                                        <input 
                                            type="file" 
                                            class="form-control col-sm-6" 
                                             
                                            formControlName="SiteVisitUpload"
                                            (change)="getSiteVisitFileDetails($event)"
                                        >
                                        <i 
                                            *ngIf="showSiteVisitFile"
                                            class="pl-3 far fa-trash-alt text-danger" 
                                            (click)="removeSiteVisitFile()"
                                        ></i>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="col-sm-4 col-form-label">Other Document</label>
                                        <i class="fas fa-upload pr-3" *ngIf="!showOtherDocument1File"></i>
                                        <i *ngIf="showOtherDocument1File" class="fas fa-check pr-3 text-success"></i>
                                        <input 
                                            type="file" 
                                            class="form-control col-sm-6" 
                                             
                                            formControlName="OtherDocument1Upload"
                                            (change)="getOtherDocument1FileDetails($event)"
                                        >
                                        <i 
                                            *ngIf="showOtherDocument1File"
                                            class="pl-3 far fa-trash-alt text-danger" 
                                            (click)="removeOtherDocument1File()"
                                        ></i>
                                    </div>
                                </div>
                            </div>
                            <div class="row form-inline mb-3">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="col-sm-4 col-form-label pl-0">Contract</label>
                                        <i class="fas fa-upload pr-3" *ngIf="!showContractFile"></i>
                                        <i *ngIf="showContractFile" class="fas fa-check pr-3 text-success"></i>
                                        <input 
                                            type="file" 
                                            class="form-control col-sm-6" 
                                             
                                            formControlName="ContractUpload"
                                            (change)="getContractFileDetails($event)"
                                        >
                                        <i 
                                            *ngIf="showContractFile"
                                            class="pl-3 far fa-trash-alt text-danger" 
                                            (click)="removeContractFile()"
                                        ></i>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="col-sm-4 col-form-label">Other Document</label>
                                        <i class="fas fa-upload pr-3" *ngIf="!showOtherDocument2File"></i>
                                        <i *ngIf="showOtherDocument2File" class="fas fa-check pr-3 text-success"></i>
                                        <input 
                                            type="file" 
                                            class="form-control col-sm-6" 
                                             
                                            formControlName="OtherDocument2Upload"
                                            (change)="getOtherDocument2FileDetails($event)"
                                        >
                                        <i 
                                            *ngIf="showOtherDocument2File"
                                            class="pl-3 far fa-trash-alt text-danger" 
                                            (click)="removeOtherDocument2File()"
                                        ></i>
                                    </div>
                                </div>
                            </div>

                            <ng-template #documentUpload let-modal>
                                <div class="modal-header">
                                    <h4 class="modal-title" id="modal-basic-title">Available Documents</h4>
                                    <button type="button" class="close" aria-label="Close" >
                                      <span aria-hidden="true">&times;</span>
                                    </button>
                                  </div>
                                  <div class="modal-body">
                                      <div class="col">
                                          <ol class="list-group pl-0">

                                              <li class="mt-1 mb-1">Invoice
                                                <span *ngIf="showInvoiceFile" class="body-2 pl-3 medium-emphasis">
                                                    {{file_name}}
                                                </span>
                                                <i 
                                                    *ngIf="showInvoiceFile"
                                                    class="pl-3 far fa-trash-alt text-danger" 
                                                    (click)="removeInvoiceFile()"
                                                ></i> 
                                              </li>

                                              <li class="mt-1 mb-1">Customer Visit
                                                <span *ngIf="showSiteVisitFile" class="body-2 pl-3 medium-emphasis">
                                                    {{site_visit_file_name}}
                                                </span>
                                                <i 
                                                    *ngIf="showSiteVisitFile"
                                                    class="pl-3 far fa-trash-alt text-danger" 
                                                    (click)="removeSiteVisitFile()"
                                                ></i> 
                                              </li>

                                              <li class="mt-1 mb-1">Contract
                                                <span *ngIf="showContractFile" class="body-2 pl-3 medium-emphasis">
                                                    {{contract_file_name}}
                                                </span>
                                                <i 
                                                    *ngIf="showContractFile"
                                                    class="pl-3 far fa-trash-alt text-danger" 
                                                    (click)="removeContractFile()"
                                                ></i>
                                              </li>

                                              <li class="mt-1 mb-1">Work Order
                                                <span *ngIf="showSubscriberFormFile" class="body-2 pl-3 medium-emphasis">
                                                    {{subscriber_file_name}}
                                                </span>
                                                <i 
                                                    *ngIf="showSubscriberFormFile"
                                                    class="pl-3 far fa-trash-alt text-danger" 
                                                    (click)="removeSubscriberFormFile()"
                                                ></i>
                                              </li>

                                              <li class="mt-1 mb-1">Other Document
                                                <span *ngIf="showOtherDocument1File" class="body-2 pl-3 medium-emphasis">
                                                    {{other_Document1_file_name}}
                                                </span>
                                                <i 
                                                    *ngIf="showOtherDocument1File"
                                                    class="pl-3 far fa-trash-alt text-danger" 
                                                    (click)="removeOtherDocument1File()"
                                                ></i>
                                              </li>

                                              <li class="mt-1 mb-1">Other Document
                                                <span *ngIf="showOtherDocument2File" class="body-2 pl-3 medium-emphasis">
                                                    {{other_Document2_file_name}}
                                                </span>
                                                <i 
                                                    *ngIf="showOtherDocument2File"
                                                    class="pl-3 far fa-trash-alt text-danger" 
                                                    (click)="removeOtherDocument2File()"
                                                ></i>
                                              </li>
                                          </ol>
                                      </div>
                                  </div>
                                  <div class="modal-footer">
                                    <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Close</button>
                                  </div>
                            </ng-template>
                        </div>
                        
                        <div class="row mt-3">
                            <div class="col-md-12">
                                <h3>
                                    Invoice Information
                                </h3>
                            </div>
                        </div>
                        <div class="row form-inline mb-2">
                            <div class="col">
                                <div class="form-group">
                                    <label class="col-form-label pl-0">Invoice #</label>
                                    <div class="input-group d-flex">
                                        <input 
                                            type="text" 
                                            class="form-control col-sm-10" 
                                            [(ngModel)]="invoiceNumber" 
                                            formControlName="PartnerInvoiceNumber">
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <label class="col-form-label pl-0">Invoice Date</label>
                                <div class="form-group">
                                    <!-- <label class="col-form-label pl-0">Invoice Date</label> -->
                                    <div class="input-group d-flex justify-content-center">
                                        <input 
                                            type="date" 
                                            class="form-control col-sm-12" 
                                            [(ngModel)]="invoiceDate" formControlName="PartnerInvoiceDate"
                                        >
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="form-group">
                                    <div class="">
                                        <label class="col-form-label">Total</label>
                                        <input 
                                            currencyMask
                                            class="invoiceTotalInput"
                                            [(ngModel)]="invoiceTotal"
                                            formControlName="InvoiceTotal"
                                            (change)="onChangeInvoiceTotal($event)"
                                        >
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="form-group">
                                    <div class="">
                                        <label class="col-form-label">Tax</label>
                                        <input 
                                            currencyMask
                                            class="invoiceTotalInput"
                                            [(ngModel)]="partnerTaxAmount"
                                            formControlName="PartnerTaxAmount"
                                            (change)="onChangePartnerTaxAmount($event)"
                                            [min]="0"
                                            [(ngbTooltip)]="taxToolTip"
                                        >
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group form-inline">
                                    <label class="col-form-label pl-0 col-sm-6">Add RMR (Enter Line Items)<i class="fas fa-plus-circle pl-3" (click)="openRecurringModal(recurring)"></i></label>
                                    <div class="input-group col-sm-5 ml-auto">
                                        <kendo-numerictextbox
                                            format="c2"
                                            [value]="totalSumRecurring"
                                            formControlName="Recurring"
                                            [spinners]="false"
                                            placeholder="$0.00"
                                        ></kendo-numerictextbox>
                                    </div>
                                </div>
                                <div class="form-group form-inline">
                                    <label class="col-form-label pl-0 col-sm-6">Other Charges (Enter Line Items)<i class="fas fa-plus-circle pl-3" (click)="openEquipMaterialsModal(equipmat)"></i></label>
                                    <div class="input-group col-sm-5 ml-auto">
                                        <kendo-numerictextbox
                                            format="c2"
                                            [value]="totalSumEquipMat"
                                            formControlName="EquipmentAndMaterials"
                                            [spinners]="false"
                                            placeholder="$0.00"
                                        ></kendo-numerictextbox>
                                    </div>
                                </div>
                                <div class="form-group form-inline">
                                    <label class="col-form-label pl-0 col-sm-6">Labor Charges (Enter Line Items)<i class="fas fa-plus-circle pl-3" (click)="openLaborChargesModal(laborcharges)"></i></label>
                                    <div class="input-group col-sm-5 ml-auto">
                                        <kendo-numerictextbox
                                            format="c2"
                                            [value]="totalSumLaborCharges"
                                            formControlName="LaborCharges"
                                            [spinners]="false"
                                            placeholder="$0.00"
                                        ></kendo-numerictextbox>
                                    </div>
                                </div>
                                <div class="form-group form-inline">
                                    <label class="col-sm-6 col-form-label pl-0 display-contents">Line Items Subtotal</label>
                                    <div class="input-group col-sm-5 ml-auto">
                                        <p class="lineItemSubtotal">{{ lineItemSubtotal | currency: 'USD' : true : '1.2-2' }}</p>
                                        <kendo-numerictextbox
                                            class="d-none"
                                            format="c2"
                                            [value]="lineItemSubtotal"
                                            formControlName="LineItemSubtotal"
                                            [spinners]="false"
                                            placeholder="$0.00"
                                        ></kendo-numerictextbox>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="shadow mb-3">
                                    <div class="ml-2 mt-2">
                                        <h3>Contract Terms</h3>
                                    </div>
                                    <div class="form-group form-inline">
                                        <label class="col-sm-3 col-form-label">Start Date</label>
                                        <input 
                                            type="date" formControlName="ContractDate" class="form-control" 
                                            (change)="onChangeVerifyContractDate($event)"
                                            (keydown)="getKeyPress($event)"
                                        >
                                        <!-- <input 
                                            type="date" formControlName="ContractDate" class="form-control" 
                                            (change)="onChangeVerifyContractDate($event)"
                                            (keydown)="disableBackSpaceAndDelete($event)"
                                        > -->
                                    </div>
                                    <div class="form-group form-inline">
                                        <label class="col-sm-2 col-form-label">Term</label>
                                        <input 
                                            type="number" 
                                            min="0"
                                            class="form-control col-sm-2 mr-3"
                                            [(ngModel)]="contractTerm" formControlName="ContractTerm"
                                            (change)="getContractTerm($event)"
                                        >Mo
    
                                        <label class="col-sm-3 col-form-label">Renewal</label>
                                        <input 
                                            type="number"
                                            min="0"
                                            class="form-control col-sm-2 mr-3"
                                            [(ngModel)]="renewal" formControlName="RenewalMonths"
                                            (change)="getRenewal($event)"
                                        >Mo
                                    </div>
                                </div>
                                <div class="shadow mb-3">
                                    <div class="row">
                                        <div class="col border-right ml-2 pl-3 pr-2">
                                            <div class="form-group form">
                                                <label class="mr-2 text-success font-weight-bold">Signals Tested!</label>
                                                <input 
                                                    type="radio" 
                                                    formControlName="SignalsTested" 
                                                    value="1"
                                                    (change)="onSignalsTested($event)"
                                                >
                                                <br>
                                                <small>I certify that at least 20% of zones were tested with signals sent & received by Central Station.</small>
                                            </div>
                                        </div>
                                        <div class="col pr-3 pl-2 mr-1">
                                            <div class="form-group form">
                                                <label class="mr-2 text-danger font-weight-bold">Less than 20% of Signals Tested!</label>
                                                <input 
                                                    type="radio" 
                                                    formControlName="SignalsTested" 
                                                    value="2"
                                                    (change)="onSignalsTested($event)"
                                                >
                                                <br>
                                                <small>Please use the comment section to describe the level of signal testing completed.</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- <div class="progress" *ngIf="barWidth!='0%'">
                                    <span [innerHTML]="barWidth"></span>
                                    <div class="bar" [style.width]="barWidth"></div>
                                </div> -->

                            </div>
                            
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <button 
                                    type="reset" 
                                    class="btn btn-error float-right" 
                                    (click)="reset()"
                                    [(ngbTooltip)]="showResetInvoice">
                                    <i class="fas fa-redo pr-2"></i>Reset
                                </button>
                                <button 
                                    type="button" 
                                    class="btn btn-light-blue float-right" 
                                    (click)="openAddViewCommentsModal(comments)"
                                    [(ngbTooltip)]="showAddViewComments">
                                    <i class="far fa-eye pr-2"></i>Add/View Comments
                                </button>

                                <!--Validate Invoice/Submit Invoice-->
                                <ng-container *ngIf="showValidateInvoiceButton">
                                    <button 
                                        type="submit" 
                                        class="btn btn-validate float-right mr-2"
                                        (click)="openValidateItemsModal(required, $event)"
                                        [(ngbTooltip)]="showValidateInvoice"
                                    ><i class="fas fa-exclamation-triangle pr-2"></i>Validate Invoice</button>
                                    <!-- <button 
                                        type="submit" 
                                        class="btn btn-validate float-right mr-2"
                                        (click)="validateItems()"
                                    ><i class="fas fa-exclamation-triangle pr-2"></i>Validate Invoice</button> -->
                                </ng-container>
                                <ng-container *ngIf="showSubmitInvoiceButton">
                                    <button 
                                        type="submit" 
                                        class="btn btn-secondary float-right mr-2"
                                        (click)="onSubmit(incentiveDashboardForm);clicked = true;"
                                    ><i class="fas fa-plus pr-2"></i>Submit Invoice</button>
                                </ng-container>

                                <!-- <button 
                                    type="button" 
                                    class="btn btn-secondary float-right mr-2" 
                                    (click)="onSubmit(incentiveDashboardForm);clicked = true;" 
                                    [disabled]="clicked || !incentiveDashboardForm.valid">
                                    <i class="fas fa-plus pr-2"></i>Submit Invoice
                                </button> -->
                            </div>
                        </div>
                    </div> 
                </div>
            </div>
        </form>
    </div>
</div>

<footer class="footer">
    <div class="ml-5 mr-5">
        <div class="row pb-3">
            <div class="col-md-3">
                <h2 class="font-weight-bolder footer-logo">The Partnership Connection</h2>
            </div>
            <div class="col-md-1">
                <p class="font-weight-bold footer-logo mb-0 mt-25">powered by </p>
            </div>
            <div class="col-md-8">
                <img src="../../../assets/img/AlarmConnections_Logo_Primary(With_Tag)_RGB.svg" id="afa-brand-logo">
            </div>
        </div>
    </div>
</footer>

<ngx-spinner bdColor="rgba(51, 51, 51, 0.8)" size="default" type="ball-spin-clockwise">  
    <p style="color: white">Please Wait...</p>  
    <p style="color: white">Do not close your browser!</p>
</ngx-spinner>

<ng-template #content let-modal>
    <!-- <div class="incentive-items-modal">
        <div class="incentive-items-content">
            
        </div>
    </div> -->
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Search By Customer</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-md-4">
                <div class="col-sm-12">
                    <h2>Look up a customer</h2>
                </div>
                <div class="col-sm-12 input-group">
                    <input 
                        type="text" 
                        class="form-control" 
                        [(ngModel)]="searchValue"
                        placeholder="Start searching for a customer by Customer Name"
                    >
                    <div class="input-group-append">
                        <span class="input-group-text"><i class="fas fa-search" aria-hidden="true" ></i></span>
                      </div>
                </div>
            </div>
            <div class="col-md-4">
                <h2>Search By:</h2>
                <form>
                    <div class="form-group form-inline">
                        <div class="col form-inline">
                            <input 
                                [(ngModel)]="searchByCustomer"
                                [checked]="true"
                                type="radio" 
                                name="searchBy" 
                                class="mr-3"
                                (change)="onItemChangeToCustomer($event.target.value)"
                            >
                            <label>Customer</label>
                        </div>
                        <div class="col form-inline">
                            <input
                                type="radio" 
                                name="searchBy" 
                                class="mr-3"
                                (change)="onItemChangeToBilling($event.target.value)"
                            >
                            <label>Billing Address</label>
                        </div>
                    </div>
                    <div class="form-group form-inline">
                        <div class="col form-inline">
                            <input 
                                type="radio" 
                                name="searchBy" 
                                class="mr-3"
                                (change)="onItemChangeToSite($event.target.value)"
                            >
                            <label>Site Address</label>
                        </div>
                        <div class="col form-inline">
                            <input 
                                type="radio" 
                                name="searchBy" 
                                class="mr-3"
                                (change)="onItemChangeToCentralStation($event.target.value)"
                            >
                            <label>Central Station #</label>
                        </div>
                    </div>
                </form>
            </div>
            <div class="col-md-4">
                <h2>Options: Cancelled Customers</h2>
                <form>
                    <div class="">
                        <div class="form-group form-inline">
                            <div class="col form-inline">
                                <input 
                                    type="radio" 
                                    name="cancelledCustomers" 
                                    class="mr-3"
                                    [value]="0" 
                                    required
                                    (change)="onItemChangeToInclude($event.target.value)"
                                >
                                <label>Include</label>
                            </div>
                            <div class="col form-inline">
                                <input 
                                    type="radio" 
                                    name="cancelledCustomers"
                                    class="mr-3" 
                                    [value]="1" 
                                    required
                                    [checked]="true"
                                    (change)="onItemChangeToExclude($event.target.value)"
                                >
                                <label>Exclude</label>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <table class="table table-responsive">
            <thead>
                <tr>
                    <th scope="col">Customer Number</th>
                    <th scope="col">Customer Name</th>
                    <th scope="col">Customer Status</th>
                    <th scope="col">Address Line 1</th>
                    <th scope="col">Address Line 2</th>
                    <th scope="col">Address Line 3</th>
                    <th scope="col">City</th>
                    <th scope="col">State</th>
                    <th scope="col">Zip Code</th>
                    <th scope="col">Pending Cancel</th>
                    <th scope="col">Collections Status</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let customer of customerSearchListDec14 | filter:searchValue | paginate: { itemsPerPage: 10, currentPage: p }" (click)="selectCustomer(customer.customer_id, customer.customer_Name, customer.customer_Number, customer.customerStatus, customer.pendingCancel, customer.collectionsStatus,$event)" click>
                    <td>{{ customer.customer_Number }}</td>
                    <td>{{ customer.customer_Name }}</td>
                    <td>{{ customer.customerStatus }}</td>
                    <td>{{ customer.address_1 }}</td>
                    <td>{{ customer.address_2 }}</td>
                    <td>{{ customer.address_3 }}</td>
                    <td>{{ customer.city }}</td>
                    <td>{{ customer.state }}</td>
                    <td>{{ customer.zipCode }}</td>
                    <td>{{ customer.pendingCancel }}</td>
                    <td>{{ customer.collectionsStatus }}</td>
                </tr>
            </tbody>
        </table>
        <pagination-controls (pageChange)="p = $event" class="text-center"></pagination-controls>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Close</button>
    </div>
</ng-template>

<ng-template #site let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Search By Site</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-md-4">
                <div class="col-sm-12">
                    <h2>Look up a site</h2>
                </div>
                <div class="col-sm-12 input-group">
                    <input 
                        type="text" 
                        class="form-control" 
                        [(ngModel)]="searchValue"
                    >
                    <span class="input-group-append">
                        <button class="btn btn-outline-secondary border-left-0" id="search-border" type="button">
                            <i class="fas fa-search" aria-hidden="true"></i>
                        </button>
                    </span>
                </div>
            </div>

            <div class="col-md-4">
                <h2>Search By:</h2>
                <form>
                    <div class="form-group form-inline">
                        <div class="col form-inline">
                            <input 
                                [(ngModel)]="searchByCustomer"
                                [checked]="true"
                                type="radio" 
                                name="searchBy" 
                                class="mr-3"
                                (change)="onItemChangeToCustomer($event.target.value)"
                            >
                            <label>Customer</label>
                        </div>
                        <div class="col form-inline">
                            <input
                                type="radio" 
                                name="searchBy" 
                                class="mr-3"
                                (change)="onItemChangeToBilling($event.target.value)"
                            >
                            <label>Billing Address</label>
                        </div>
                    </div>
                    <div class="form-group form-inline">
                        <div class="col form-inline">
                            <input 
                                type="radio" 
                                name="searchBy" 
                                class="mr-3"
                                (change)="onItemChangeToSite($event.target.value)"
                            >
                            <label>Site Address</label>
                        </div>
                        <div class="col form-inline">
                            <input 
                                type="radio" 
                                name="searchBy" 
                                class="mr-3"
                                (change)="onItemChangeToCentralStation($event.target.value)"
                            >
                            <label>Central Station #</label>
                        </div>
                    </div>
                </form>
            </div>
            <div class="col-md-4">
                <h2>Options: Cancelled Customers</h2>
                <form>
                    <div class="">
                        <div class="form-group form-inline">
                            <div class="col form-inline">
                                <input 
                                    type="radio" 
                                    name="cancelledCustomers" 
                                    class="mr-3"
                                    [value]="0" 
                                    required
                                    (change)="onItemChangeToInclude($event.target.value)"
                                >
                                <label>Include</label>
                            </div>
                            <div class="col form-inline">
                                <input 
                                    type="radio" 
                                    name="cancelledCustomers"
                                    class="mr-3" 
                                    [value]="1" 
                                    required
                                    [checked]="true"
                                    (change)="onItemChangeToExclude($event.target.value)"
                                >
                                <label>Exclude</label>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <!-- <div class="col-md-4">
                <h2>Search By:</h2>
                <form>
                    <div class="form-group">
                        <input 
                            [(ngModel)]="searchByCustomer"
                            type="radio" 
                            name="searchBy" 
                            class="mr-3"
                            (change)="onItemChangeToCustomer($event.target.value)"
                        >
                        <label>Customer</label>
                    </div>
                    <div class="form-group">
                        <input
                            [checked]="true"
                            type="radio" 
                            name="searchBy" 
                            class="mr-3"
                            (change)="onItemChangeToBilling($event.target.value)"
                        >
                        <label>Billing Address</label>
                    </div>
                    <div class="form-group">
                        <input
                            [checked]="true" 
                            type="radio" 
                            name="searchBy" 
                            class="mr-3"
                            (change)="onItemChangeToSite($event.target.value)"
                        >
                        <label>Site Address</label>
                    </div>
                    <div class="form-group">
                        <input 
                            type="radio" 
                            name="searchBy" 
                            class="mr-3"
                            (change)="onItemChangeToCentralStation($event.target.value)"
                        >
                        <label>Central Station #</label>
                    </div>
                </form>
            </div>
            <div class="col-md-4">
                <h2>Options:</h2>
                <form>
                    <div class="row">
                        <h3>Cancelled Customers</h3>
                        <div class="radio-label-vertical-wrapper">
                            <div class="form-group">
                            <label class="radio-label-vertical">
                                <input 
                                    type="radio" 
                                    name="cancelledCustomers" 
                                    [value]="0" 
                                    required
                                    (change)="onItemChangeToInclude($event.target.value)"
                                >Include</label>
                            <label class="radio-label-vertical">
                                <input 
                                    type="radio" 
                                    name="cancelledCustomers" 
                                    [value]="1" 
                                    required
                                    [checked]="true"
                                    (change)="onItemChangeToExclude($event.target.value)"
                                >Exclude</label>
                            </div>
                        </div>
                    </div>
                </form>
            </div> -->
        </div>
        <table class="table table-responsive">
            <thead>
                <tr>
                    <th scope="col">Customer Number</th>
                    <th scope="col">Customer Name</th>
                    <th scope="col">Customer Status</th>
                    <th scope="col">Address Line 1</th>
                    <th scope="col">Address Line 2</th>
                    <th scope="col">Address Line 3</th>
                    <th scope="col">City</th>
                    <th scope="col">State</th>
                    <th scope="col">Zip Code</th>
                    <th scope="col">Site Number</th>
                    <th scope="col">Site Name</th>
                    <th scope="col">Site Status</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let site of customerSearchListSite | filterSite:searchValue | paginate: { itemsPerPage: 10, currentPage: p }" (click)="selectSite(site.customer_id,site.customer_Name, site.siteName, site.customer_Site_Id,site.customer_Number)" click>
                    <td>{{ site.customer_Number }}</td>
                    <td>{{ site.customer_Name }}</td>
                    <td>{{ site.customerStatus }}</td>
                    <td>{{ site.address_1 }}</td>
                    <td>{{ site.address_2 }}</td>
                    <td>{{ site.address_3 }}</td>
                    <td>{{ site.city }}</td>
                    <td>{{ site.state }}</td>
                    <td>{{ site.zipCode }}</td>
                    <td>{{ site.site_Number }}</td>
                    <td>{{ site.siteName }}</td>
                    <td>{{ site.siteStatus }}</td>
                </tr>
            </tbody>
        </table>
        <pagination-controls (pageChange)="p = $event" class="text-center"></pagination-controls>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Close</button>
    </div>
</ng-template>

<ng-template #system let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Search By System/Central Station</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-md-4">
                <div class="col-sm-12">
                    <h2>Look up a system/Central Station</h2>
                </div>
                <div class="col-sm-12 input-group">
                    <input 
                        type="text" 
                        class="form-control" 
                        [(ngModel)]="searchValue"
                    >
                    <span class="input-group-append">
                        <button class="btn btn-outline-secondary border-left-0" id="search-border" type="button">
                            <i class="fas fa-search" aria-hidden="true"></i>
                        </button>
                    </span>
                </div>
            </div>

            <div class="col-md-4">
                <h2>Search By:</h2>
                <form>
                    <div class="form-group form-inline">
                        <div class="col form-inline">
                            <input 
                                [(ngModel)]="searchByCustomer"
                                [checked]="true"
                                type="radio" 
                                name="searchBy" 
                                class="mr-3"
                                (change)="onItemChangeToCustomer($event.target.value)"
                            >
                            <label>Customer</label>
                        </div>
                        <div class="col form-inline">
                            <input
                                type="radio" 
                                name="searchBy" 
                                class="mr-3"
                                (change)="onItemChangeToBilling($event.target.value)"
                            >
                            <label>Billing Address</label>
                        </div>
                    </div>
                    <div class="form-group form-inline">
                        <div class="col form-inline">
                            <input 
                                type="radio" 
                                name="searchBy" 
                                class="mr-3"
                                (change)="onItemChangeToSite($event.target.value)"
                            >
                            <label>Site Address</label>
                        </div>
                        <div class="col form-inline">
                            <input 
                                type="radio" 
                                name="searchBy" 
                                class="mr-3"
                                (change)="onItemChangeToCentralStation($event.target.value)"
                            >
                            <label>Central Station #</label>
                        </div>
                    </div>
                </form>
            </div>
            <div class="col-md-4">
                <h2>Options: Cancelled Customers</h2>
                <form>
                    <div class="">
                        <div class="form-group form-inline">
                            <div class="col form-inline">
                                <input 
                                    type="radio" 
                                    name="cancelledCustomers" 
                                    class="mr-3"
                                    [value]="0" 
                                    required
                                    (change)="onItemChangeToInclude($event.target.value)"
                                >
                                <label>Include</label>
                            </div>
                            <div class="col form-inline">
                                <input 
                                    type="radio" 
                                    name="cancelledCustomers"
                                    class="mr-3" 
                                    [value]="1" 
                                    required
                                    [checked]="true"
                                    (change)="onItemChangeToExclude($event.target.value)"
                                >
                                <label>Exclude</label>
                            </div>
                        </div>
                    </div>
                </form>
            </div>


            <!-- <div class="col-md-4">
                <h2>Search By:</h2>
                <form>
                    <div class="form-group">
                        <input 
                            [(ngModel)]="searchByCustomer"
                            [checked]="true"
                            type="radio" 
                            name="searchBy" 
                            class="mr-3"
                            (change)="onItemChangeToCustomer($event.target.value)"
                        >
                        <label>Customer</label>
                    </div>
                    <div class="form-group">
                        <input
                            type="radio" 
                            name="searchBy" 
                            class="mr-3"
                            (change)="onItemChangeToBilling($event.target.value)"
                        >
                        <label>Billing Address</label>
                    </div>
                    <div class="form-group">
                        <input 
                            type="radio" 
                            name="searchBy" 
                            class="mr-3"
                            (change)="onItemChangeToSite($event.target.value)"
                        >
                        <label>Site Address</label>
                    </div>
                    <div class="form-group">
                        <input 
                            type="radio" 
                            name="searchBy" 
                            class="mr-3"
                            (change)="onItemChangeToCentralStation($event.target.value)"
                        >
                        <label>Central Station #</label>
                    </div>
                </form>
            </div>
            <div class="col-md-4">
                <h2>Options:</h2>
                <form>
                    <div class="row">
                        <h3>Cancelled Customers</h3>
                        <div class="radio-label-vertical-wrapper">
                            <div class="form-group">
                            <label class="radio-label-vertical">
                                <input 
                                    type="radio" 
                                    name="cancelledCustomers" 
                                    [value]="0" 
                                    required
                                    (change)="onItemChangeToInclude($event.target.value)"
                                >Include</label>
                            <label class="radio-label-vertical">
                                <input 
                                    type="radio" 
                                    name="cancelledCustomers" 
                                    [value]="1" 
                                    required
                                    [checked]="true"
                                    (change)="onItemChangeToExclude($event.target.value)"
                                >Exclude</label>
                            </div>
                        </div>
                    </div>
                </form>
            </div> -->
        </div>
        <table class="table table-responsive">
            <thead>
                <tr>
                    <th scope="col">Alarm Account</th>
                    <th scope="col">System Status</th>
                    <th scope="col">System Code</th>
                    <th scope="col">Customer Number</th>
                    <th scope="col">Customer Name</th>
                    <th scope="col">Customer Status</th>
                    <th scope="col">Address Line 1</th>
                    <th scope="col">Address Line 2</th>
                    <th scope="col">Address Line 3</th>
                    <th scope="col">City</th>
                    <th scope="col">State</th>
                    <th scope="col">Zip Code</th>
                    <th scope="col">Site Number</th>
                    <th scope="col">Site Name</th>
                    <th scope="col">Site Status</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let station of customerSearchListCentralStation | filterCentralStation:searchValue | paginate: { itemsPerPage: 10, currentPage: p }" (click)="selectCentralStation(station.customer_id, station.customer_Site_Id, station.customer_System_Id, station.alarmAccount, station.system_Code, station.customer_Name, station.customer_Number)" click>
                    <td>{{ station.alarmAccount }}</td>
                    <td>{{ station.systemStatus }}</td>
                    <td>{{ station.system_Code }}</td>
                    <td>{{ station.customer_Number }}</td>
                    <td>{{ station.customer_Name }}</td>
                    <td>{{ station.customerStatus }}</td>
                    <td>{{ station.address_1 }}</td>
                    <td>{{ station.address_2 }}</td>
                    <td>{{ station.address_3 }}</td>
                    <td>{{ station.city }}</td>
                    <td>{{ station.state }}</td>
                    <td>{{ station.zipCode }}</td>
                    <td>{{ station.site_Number }}</td>
                    <td>{{ station.siteName }}</td>
                    <td>{{ station.siteStatus }}</td>
                </tr>
            </tbody>
        </table>
        <pagination-controls (pageChange)="p = $event" class="text-center"></pagination-controls>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Close</button>
    </div>
</ng-template>

<ng-template #comments let-modal>
    <div class="modal-header">
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-md-12">
                <!-- <form [formGroup]="incentiveDashboardForm">
                    <input type="text" formControlName="PartnerComments" class="d-none">
                </form> -->

                <form [formGroup]="partnerCommentsEntryForm" (ngSubmit)="onPartnerCommentsSubmit(partnerCommentsEntryForm)">
                    <div class="form-group">
                        <label class="d-block text-center">
                            <div class="col-sm-7 m-auto">
                                <i class="text-center">This space is provided for details, additional information and clarifications for your incentive. All information provided will be available to the incentive processing team!</i>
                            </div>
                        </label>
                        <textarea 
                            class="form-control" 
                            rows="12" 
                            formControlName="PartnerComments"
                            [(ngModel)]="partnerComments"
                        ></textarea>
                    </div>
                    <!-- <div class="form-group">
                        <button type="button" class="btn btn-secondary" (click)="modal.close('Save click')"><i class="fas fa-save pr-2"></i>Save</button>
                    </div> -->
                    <div class="col">
                        <input type="submit" value="Submit" class="btn btn-submit" [disabled]="partnerCommentsEntryForm.invalid">
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="modal-footer">
      <!-- <button type="button" class="btn btn-secondary" (click)="modal.close('Save click')"><i class="fas fa-save pr-2"></i>Save</button> -->
    </div>
</ng-template>

<ng-template #recurring let-modal>
    <div class="modal-header">
        <button class="close" aria-label="close" (click)="modal.dismiss('Cross click')">
            <span aria-label="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="card">
            <div class="card-body">
                <div class="row ml-0">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-6 pl-0">
                                <h1 class="incentive-header">Invoice Entry
                                </h1>
                            </div>
                            <div class="col-md-6">
                                <span class="mr-5 font-weight-bold">Invoice #:  <span class="text-danger">{{ invoiceNumber }}</span>
                                </span>
                                <span class="ml-5 font-weight-bold">Customer Name: <span class="text-danger">{{ customer }}</span></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 offset-md-6">
                                <span class="font-weight-bold">Customer Site Information: 
                                    <span class="text-danger">{{ customerSiteName }}</span>
                                    <span *ngIf="customerPreselected" class="text-danger">
                                        {{ bus_Name_Add1 }}
                                    </span>
                                </span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 offset-md-6">
                                <span class="font-weight-bold">Customer System Information: 
                                    <span class="text-danger">{{ systemName }}</span>
                                    <span *ngIf="customerPreselected" class="text-danger">
                                        {{ sysType_csAccount }}
                                    </span>
                                </span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 pl-0">
                                <h3 class="incentive-header">Recurring Item Entry</h3>
                            </div>
                        </div>
                    </div>
                </div>

                <section>
                    <!-- <div class="col-12 col-sm-12 col-md-9 col-lg-9 col-xl-9 my-2">
                        <div class="main">
                        <form [formGroup]="incentiveRecurringEntryForm" (ngSubmit)="onRecurringSubmit(incentiveRecurringEntryForm)">
                            <div formArrayName="entryRowsRecurring">
                                <div class="row-entry-padding" *ngFor="let entryRow of incentiveRecurringEntryForm.controls.entryRowsRecurring['controls']; let i=index" [formGroupName]="i">
                                    <div class="table-header-wrapper">
                                        <div class="table-header">
                                          <table class="table table-bordered ">
                                            <thead class="bg-secondary">
                                              <tr>
                                                <th class="table-header-column border-bottom-0 text-center">Service Provided</th>
                                                <th class="table-header-column border-bottom-0 text-center">Description</th>
                                                <th class="table-header-column border-bottom-0 text-center">Bill Cycle</th>
                                                <th class="table-header-column border-bottom-0 text-center">RMR</th>
                                                <th class="table-header-column border-bottom-0 text-center">Pass Through</th>
                                                <th class="table-header-column border-bottom-0 text-center">Billing Starts</th>
                                                <th class="table-header-column border-bottom-0 text-center">Add to an Existing RMR Item</th>
                                                <th class="table-header-column border-bottom-0 text-center">Multiple</th>
                                                <th class="table-header-column border-bottom-0 text-center">Total</th>
                                                <th class="table-header-column border-bottom-0 text-center">
            
                                                </th>
                                                <th class="table-header-column border-bottom-0 text-center">
            
                                                </th>
                                              </tr>
                                            </thead>
                                          </table>
                                        </div>
                                    </div>
                                      <div class="tables-wrapper" >
                                        <table class="table table-dark table-bordered table-hover" >
                                            <tr>
                                                <td class="text-center">
                                                    <div class="col">
                                                        <div class="dropdown">
                                                            <select 
                                                              formControlName="ItemID" 
                                                              class="form-control" 
                                                              (change)="getItemName($event,i)"
                                                              name="something_{{i}}"
                                                            >
                                                                <option *ngFor="let item of listRecurringItems" value="{{item.item_id}}" [ngValue]="item.item_id" >{{ item.itemCode }}</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td class="text-center">
                                                    <div class="col">
                                                        <input 
                                                        type="text"
                                                        maxlength="50"
                                                        class="form-control" 
                                                        formControlName="Description"
                                                        name="something_{{i}}"
                                                    >
                                                    </div>
                                                </td>
                                                <td class="text-center">
                                                    <div class="col">
                                                        <div class="dropdown">
                                                            <select formControlName="BillCycle" class="form-control">
                                                                <option value="m">Monthly</option>
                                                                <option value="q">Quarterly</option>
                                                                <option value="s">Semi-Annual</option>
                                                                <option value="a">Annual</option>
                                                            </select>
                                                        </div>
                                                      </div>
                                                </td>
                                                <td class="text-center">
                                                    <div class="col">
                                                        <kendo-numerictextbox
                                                          format="c2"
                                                          placeholder="$0.00"
                                                          formControlName="RMR"
                                                          [spinners]="false"
                                                          [style.height]="'calc(1.5em + 1.3rem)'"
                                                          [style.width]="'80%'"
                                                        ></kendo-numerictextbox>
                                                      </div>
                                                </td>
                                                <td class="text-center">
                                                    <div class="col">
                                                        <kendo-numerictextbox
                                                          format="c2"
                                                          placeholder="$0.00"
                                                          formControlName="PassThrough"
                                                          [spinners]="false"
                                                          [style.height]="'calc(1.5em + 1.3rem)'"
                                                          [style.width]="'80%'"
                                                        ></kendo-numerictextbox>
                                                      </div>
                                                </td>
                                                <td class="text-center">
                                                    <div class="col">
                                                        <input 
                                                          type="date"
                                                          class="form-control"
                                                          formControlName="BillingStartDate"
                                                        >
                                                      </div>
                                                </td>
                                                <td class="text-center">
                                                    <div class="col">
                                                        <input
                                                          class="center-block"
                                                          type="checkbox"
                                                          formControlName="Add2Item"
                                                          (change)="checkboxChanged($event)"
                                                          >
                                                      </div>
                                                </td>
                                                <td class="text-center">
                                                    <div class="col text-center">
                                                        <div class="dropdown">
                                                            <select 
                                                              formControlName="Multiple"  
                                                              class="form-control"
                                                              >
                                                                <option
                                                                    *ngFor="let m of listMultiples" 
                                                                    value="{{m.multiple}}" 
                                                                    [ngValue]="m.multiple"
                                                                >{{ m.multiple }}</option>
                                                            </select>
                                                        </div>
                                                      </div>
                                                </td>
                                                <td class="text-center">
                                                    <div class="col">
                                                        <kendo-numerictextbox
                                                            #fooRef
                                                            format="c2"
                                                            placeholder="$0.00"
                                                            formControlName="Total"
                                                            [spinners]="false"
                                                            [style.height]="'calc(1.5em + 1.3rem)'"
                                                            [style.width]="'80%'"
                                                            [attr.disabled]="true"
                                                        ></kendo-numerictextbox>
                                                    </div>
                                                </td>
                                                <td>
                                                    <button class="btn btn-add" type="button" (click)="addNewItem()">
                                                        <i class="fas fa-plus pr-1"></i>Add
                                                    </button>
                                                </td>
                                                <td>
                                                    <button class="btn btn-add" type="button" (click)="removeNewItem(i)">
                                                        <i class="fas fa-minus pr-1"></i>Remove
                                                    </button>
                                                </td>
                                            </tr>
                                        </table>
                                      </div>
                                </div>
                            </div>
                        </form>
                        </div>
                      </div> -->

                    <header class="recurring-header-bg">
                        <div class="col">
                            <span class="align-middle">Service Provided</span>
                        </div>
                        <div class="col">
                          <span class="align-middle">Description</span>  
                        </div>
                        <div class="col">
                          <span class="align-middle">Bill Cycle</span>
                        </div>
                        <div class="col">
                          <span class="align-middle">RMR</span>
                        </div>
                        <div class="col">
                          <span class="align-middle">Pass Through</span>
                        </div>
                        <div class="col">
                          <span class="align-middle">Billing Starts</span>
                        </div>
                        <div class="col text-center">
                          <span class="align-middle">Add to an Existing RMR Item</span>
                        </div>
                        <div class="col text-center">
                          <span class="align-middle">Multiple</span>
                        </div>
                        <div class="col text-center">
                          <span class="align-middle">Total</span>
                        </div>
                        <div class="col"></div>
                        <div class="col"></div>
                    </header>
                    <form [formGroup]="incentiveRecurringEntryForm" (ngSubmit)="onRecurringSubmit(incentiveRecurringEntryForm)">
                        <div formArrayName="entryRowsRecurring">
                            <div class="row-entry-padding" *ngFor="let entryRow of incentiveRecurringEntryForm.controls.entryRowsRecurring['controls']; let i=index" [formGroupName]="i">
                                <div class="row">
                                    <div class="col">
                                      <div class="dropdown">
                                          <select 
                                            formControlName="ItemID" 
                                            class="form-control" 
                                            (change)="getItemName($event,i)"
                                            name="something_{{i}}"
                                          >
                                              <option *ngFor="let item of listRecurringItems" value="{{item.item_id}}" [ngValue]="item.item_id" >{{ item.itemCode }}</option>
                                          </select>
                                      </div>
                                    </div>
                                    <div class="col">
                                      <input 
                                        type="text"
                                        maxlength="50"
                                        class="form-control" 
                                        formControlName="Description"
                                        name="something_{{i}}"
                                      >
                                    </div>
                                    <div class="col">
                                      <div class="dropdown">
                                          <select formControlName="BillCycle" class="form-control">
                                              <option value="m">Monthly</option>
                                              <option value="q">Quarterly</option>
                                              <option value="s">Semi-Annual</option>
                                              <option value="a">Annual</option>
                                          </select>
                                      </div>
                                    </div>
                                    <div class="col">
                                      <kendo-numerictextbox
                                        format="c2"
                                        placeholder="$0.00"
                                        formControlName="RMR"
                                        [spinners]="false"
                                        [style.height]="'calc(1.5em + 1.3rem)'"
                                        [style.width]="'80%'"
                                      ></kendo-numerictextbox>
                                    </div>
                                    <div class="col">
                                      <kendo-numerictextbox
                                        format="c2"
                                        placeholder="$0.00"
                                        formControlName="PassThrough"
                                        [spinners]="false"
                                        [style.height]="'calc(1.5em + 1.3rem)'"
                                        [style.width]="'80%'"
                                      ></kendo-numerictextbox>
                                    </div>
                                    <div class="col">
                                      <input 
                                        type="date"
                                        class="form-control"
                                        formControlName="BillingStartDate"
                                      >
                                    </div>
                                    <div class="col">
                                      <input
                                        class="center-block"
                                        type="checkbox"
                                        formControlName="Add2Item"
                                        (change)="checkboxChanged($event)"
                                        >
                                    </div>
                                    <div class="col text-center">
                                      <div class="dropdown">
                                          <select 
                                            formControlName="Multiple"  
                                            class="form-control"
                                            >
                                              <option
                                                  *ngFor="let m of listMultiples" 
                                                  value="{{m.multiple}}" 
                                                  [ngValue]="m.multiple"
                                              >{{ m.multiple }}</option>
                                          </select>
                                      </div>
                                    </div>
                                    <div class="col">
                                        <kendo-numerictextbox
                                            #fooRef
                                            format="c2"
                                            placeholder="$0.00"
                                            formControlName="Total"
                                            [spinners]="false"
                                            [style.height]="'calc(1.5em + 1.3rem)'"
                                            [style.width]="'80%'"
                                            [attr.disabled]="true"
                                        ></kendo-numerictextbox>
                                    </div>
                                    <div class="col">
                                        <button class="btn btn-add" type="button" (click)="addNewItem()">
                                            <i class="fas fa-plus pr-1"></i>Add
                                        </button>
                                    </div>
                                    <div class="col">
                                        <button class="btn btn-add" type="button" (click)="removeNewItem(i)">
                                            <i class="fas fa-minus pr-1"></i>Remove
                                        </button>
                                    </div>
                                  </div>
                            </div>
                        </div>
                        <div class="col">
                            <input type="submit" value="Submit/Save" class="btn btn-submit" [disabled]="incentiveRecurringEntryForm.invalid">
                        </div>
                        <div class="row pt-2 pl-3">
                            <div class="col">
                                <p>Total is: {{ totalSumRecurring | currency }}</p>
                            </div>
                        </div>
                    </form>
                </section>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #equipmat let-modal>
    <div class="modal-header">
        <!-- <h4 class="modal-title">Title</h4> -->
        <button class="close" aria-label="close" (click)="modal.dismiss('Cross click')">
            <span aria-label="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="card-body">
            <div class="row ml-0">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-6 pl-0">
                            <h1 class="incentive-header">Invoice Entry
                            </h1>
                        </div>
                        <div class="col-md-6">
                            <span class="mr-5 font-weight-bold">Invoice #:  <span class="text-danger">{{ invoiceNumber }}</span>
                            </span>
                            <span class="ml-5 font-weight-bold">Customer Name: <span class="text-danger">{{ customer }}</span></span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 offset-md-6">
                            <span class="font-weight-bold">Customer Site Information: 
                                <span class="text-danger">{{ customerSiteName }}</span>
                                <!--if-->
                                <span *ngIf="customerPreselected" class="text-danger">
                                    {{ bus_Name_Add1 }}
                                </span>
                            </span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 offset-md-6">
                            <span class="font-weight-bold">Customer System Information: 
                                <span class="text-danger">{{ systemName }}</span>
                                <span *ngIf="customerPreselected" class="text-danger">
                                    {{ sysType_csAccount }}
                                </span>
                            </span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 pl-0">
                            <h3 class="incentive-header">Other Charges Entry</h3>
                        </div>
                    </div>
                </div>
            </div>
    
            <section>
                <header class="equipmat-header-bg">
                    <div class="col">
                        <span class="align-middle">
                            Item
                        </span>
                    </div>
                    <div class="col-sm-3 pl-25">
                        <span class="align-middle">
                            Description/Part #
                        </span>
                    </div>
                    <div class="col">
                        <span class="align-middle">
                            Quantity
                        </span>
                    </div>
                    <div class="col">
                        <span class="align-middle">
                            Cost
                        </span>
                    </div>
                    <div class="col">
                        <span class="align-middle">
                            Total
                        </span>
                    </div>
                    <div class="col"></div>
                    <div class="col"></div>
                </header>
                <form 
                *ngIf="incentiveEquipMatEntryForm"
                [formGroup]="incentiveEquipMatEntryForm" 
                (ngSubmit)="onEquipMatSubmit(incentiveEquipMatEntryForm)">
                    <div formArrayName="entryRowsEquipMat">
                        <div class="row-entry-padding" *ngFor="let entryRow of incentiveEquipMatEntryForm.controls.entryRowsEquipMat['controls']; let i=index" [formGroupName]="i">
                            <div class="row">
                                <div class="col">
                                    <div class="dropdown">
                                        <select 
                                            formControlName="ItemID" class="form-control" 
                                            (change)="getEquipMatItemName($event,i)"
                                            name="something_{{i}}"
                                        >
                                            <option *ngFor="let item of listMatItems" value="{{item.item_id}}" [ngValue]="item.item_id">{{ item.itemCode }}</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col">
                                    <input 
                                        type="text"
                                        maxlength="50"
                                        class="form-control description"
                                        formControlName="Description" 
                                        name="something_{{i}}"
                                    >
                                </div>
                                <div class="col">
                                    <input 
                                        type="number" 
                                        formControlName="Quantity"
                                        class="form-control w-54"
                                        min="0"
                                    >
                                </div>
                                <div class="col">
                                    <kendo-numerictextbox
                                        format="c2"
                                        placeholder="$0.00"
                                        formControlName="Cost"
                                        [spinners]="false"
                                        [style.height]="'calc(1.5em + 1.3rem)'"
                                        [style.width]="'80%'"
                                    ></kendo-numerictextbox>
                                </div>
                                <div class="col">
                                    <kendo-numerictextbox
                                        format="c2"
                                        placeholder="$0.00"
                                        formControlName="Total"
                                        [spinners]="false"
                                        [style.height]="'calc(1.5em + 1.3rem)'"
                                        [style.width]="'80%'"
                                        [attr.disabled]="true"
                                    ></kendo-numerictextbox>
                                </div>
                                <div class="col">
                                    <button class="btn btn-add" type="button"(click)="addNewEquipMatItem()">
                                        <i class="fas fa-plus pr-1"></i>Add
                                    </button>
                                </div>
                                
                                <div class="col">
                                    <button class="btn btn-add" type="button" (click)="removeNewEquipMatItem(i)">
                                        <i class="fas fa-minus pr-1"></i>Remove
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <input type="submit" value="Submit/Save" class="btn btn-submit" [disabled]="incentiveEquipMatEntryForm.invalid">
                    </div>
                    <div class="row pt-2 pl-3">
                        <div class="col">
                            <p>Total is: {{ totalSumEquipMat | currency }}</p>
                        </div>
                    </div>
                </form>
            </section>
        </div>
    </div>
</ng-template>

<ng-template #laborcharges let-modal>
    <div class="modal-header">
        <!-- <h4 class="modal-title">Title</h4> -->
        <button class="close" aria-label="close" (click)="modal.dismiss('Cross click')">
            <span aria-label="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="card-body">
            <div class="row ml-0">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-6 pl-0">
                            <h1 class="incentive-header">Invoice Entry
                            </h1>
                        </div>
                        <div class="col-md-6">
                            <span class="mr-5 font-weight-bold">Invoice #:  <span class="text-danger">{{ invoiceNumber }}</span>
                            </span>
                            <span class="ml-5 font-weight-bold">Customer Name: <span class="text-danger">{{ customer }}</span></span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 offset-md-6">
                            <span class="font-weight-bold">Customer Site Information: 
                                <span class="text-danger">{{ customerSiteName }}</span>
                                <span *ngIf="customerPreselected" class="text-danger">
                                    {{ bus_Name_Add1 }}
                                </span>
                            </span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 offset-md-6">
                            <span class="font-weight-bold">Customer System Information: 
                                <span class="text-danger">{{ systemName }}</span>
                                <span *ngIf="customerPreselected" class="text-danger">
                                    {{ sysType_csAccount }}
                                </span>
                            </span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 pl-0">
                            <h3 class="incentive-header">Labor Entry</h3>
                        </div>
                    </div>
                </div>
            </div>
    
            <section>
                <header class="equipmat-header-bg">
                    <div class="col">
                        <span class="align-middle">
                            Item
                        </span>
                    </div>
                    <div class="col-sm-3 pl-25">
                        <span class="align-middle">
                            Description
                        </span>
                    </div>
                    <div class="col">
                        <span class="align-middle">
                            Hours
                        </span>
                    </div>
                    <div class="col">
                        <span class="align-middle">
                           Cost per Hour
                        </span>
                    </div>
                    <div class="col">
                        <span class="align-middle">
                            Total
                        </span>
                    </div>
                    <div class="col"></div>
                    <div class="col"></div>
                </header>
                <form [formGroup]="incentiveLaborChargesEntryForm" (ngSubmit)="onLaborChargesSubmit(incentiveLaborChargesEntryForm)">
                    <div formArrayName="entryRowsLaborCharges">
                        <div class="row-entry-padding" *ngFor="let entryRow of incentiveLaborChargesEntryForm.controls.entryRowsLaborCharges['controls']; let i=index;" [formGroupName]="i">
                            <div class="row">
                                <div class="col">
                                    <div class="dropdown">
                                        <select 
                                            formControlName="ItemID" class="form-control" 
                                            (change)="getLaborChargesItemName($event,i)"
                                            name="something_{{i}}"
                                        >
                                            <option *ngFor="let item of listLaborItems" value="{{item.item_id}}" [ngValue]="item.item_id">{{ item.itemCode }}</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col">
                                    <input 
                                        type="text"
                                        maxlength="50" 
                                        class="form-control description"
                                        formControlName="Description"
                                        name="something_{{i}}"
                                    >
                                </div>
                                <div class="col">
                                    <input 
                                        type="number" 
                                        formControlName="Quantity"
                                        class="form-control w-54"
                                        min="0"
                                    >
                                </div>
                                <div class="col">
                                    <!-- <input 
                                        type="text"
                                        class="form-control"
                                        formControlName="Cost"
                                        placeholder="$0.00"
                                        mask="separator.2" 
                                        thousandSeparator=","
                                        prefix="$"
                                        (change)="calculateCost($event,i)"
                                    > -->
                                    <kendo-numerictextbox
                                        format="c2"
                                        placeholder="$0.00"
                                        formControlName="Cost"
                                        [spinners]="false"
                                        [style.height]="'calc(1.5em + 1.3rem)'"
                                        [style.width]="'80%'"
                                        (change)="calculateCost($event,i)"
                                    ></kendo-numerictextbox>
                                </div>
                                <div class="col">
                                    <!-- <input 
                                        type="text"
                                        class="form-control"
                                        formControlName="Total" 
                                        [placeholder]="placeholder"
                                        prefix="$"
                                        
                                        [attr.disabled]="true"
                                    > -->
                                    <kendo-numerictextbox
                                        format="c2"
                                        placeholder="$0.00"
                                        formControlName="Total"
                                        [spinners]="false"
                                        [style.height]="'calc(1.5em + 1.3rem)'"
                                        [style.width]="'80%'"
                                        [attr.disabled]="true"
                                    ></kendo-numerictextbox>
                                </div>
                                <div class="col">
                                    <button class="btn btn-add" type="button" (click)="addNewLaborChargesItem()">
                                        <i class="fas fa-plus pr-1"></i>Add
                                    </button>
                                </div>
                                <div class="col">
                                    <!-- <button class="btn btn-submit" (click)="onSubmit(incentiveLaborChargesEntryForm)">
                                        <i class="fas fa-upload pr-1"></i>Submit
                                    </button> -->
                                    <button class="btn btn-add" type="button" (click)="removeNewLaborChargesItem(i)">
                                        <i class="fas fa-minus pr-1"></i>Remove
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <input type="submit" value="Submit/Save" class="btn btn-submit" [disabled]="incentiveLaborChargesEntryForm.invalid">
                    </div>
                    <div class="row pt-2 pl-3">
                        <div class="col">
                            <p>Total is: {{ totalSumLaborCharges | currency }}</p>
                        </div>
                    </div>
                </form>
            </section>
        </div>
    </div>
</ng-template>

<ng-template #required let-modal>
    <div class="modal-header">
        <button class="close" aria-label="close" (click)="modal.dismiss('Cross click')">
            <span aria-label="true">&times;</span>
        </button>
    </div>
    <div class="modal-body pt-0">
        <div class="card-body">
            <div class="row mb-5">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col text-center">
                            <h5 class="headline-5">Invoice Validation</h5>
                        </div>
                    </div>
                </div>
            </div>
    
            <section>
                <header class="">
                    <div class="col">
                        <div class="row" *ngIf="customerIDValidated || customerSiteIDValidated || customerSystemIDValidated">
                            <i class="fas fa-stop-circle mr-1 text-error mr-3"></i>
                            <p class="medium-emphasis body-2">
                                You must select a customer, site and either select a system or have the New System box checked to continue.
                            </p>
                        </div>
                        <div class="row" *ngIf="invoiceTotalValidated">
                            <i class="fas fa-stop-circle mr-1 text-error mr-3"></i>
                            <p class="medium-emphasis body-2">
                                The entered total does not match the sum of the item subtotal plus the tax.
                            </p>
                        </div>
                        <div class="row" *ngIf="invoiceTotalValidatedNonPartner">
                            <i class="fas fa-exclamation-triangle mr-1 text-warning mr-3"></i>
                            <p class="medium-emphasis body-2">
                                The entered total does not match the sum of the item subtotal plus the tax.
                            </p>
                        </div>

                        <div class="row" *ngIf="systemInformationSectionValidated">
                            <i class="fas fa-stop-circle mr-1 text-error mr-3"></i>
                            <p class="medium-emphasis body-2">
                                A new system requires Account Number, System Type, Panel Type and Central Station.
                            </p>
                        </div>
                        <div class="row" *ngIf="systemInformationSectionValidatedNonPartner">
                            <i class="fas fa-exclamation-triangle mr-1 text-warning mr-3"></i>
                            <p class="medium-emphasis body-2">
                                A new system requires Account Number, System Type, Panel Type and Central Station.
                            </p>
                        </div>

                        <div class="row" *ngIf="invoiceDocValidated">
                            <i class="fas fa-stop-circle mr-1 text-error mr-3"></i>
                            <p class="medium-emphasis body-2">
                                All submissions must be accompanied by an uploaded invoice form.
                            </p>
                        </div>
                        <div class="row" *ngIf="invoiceDocValidatedNonPartner">
                            <i class="fas fa-exclamation-triangle mr-1 text-warning mr-3"></i>
                            <p class="medium-emphasis body-2">
                                All submissions must be accompanied by an uploaded invoice form.
                            </p>
                        </div>

                        <div class="row" *ngIf="customerVisitDocValidated">
                            <i class="fas fa-stop-circle mr-1 text-error mr-3"></i>
                            <p class="medium-emphasis body-2">
                                A customer visit form must be uploaded if a customer or adoption visit was performed.
                            </p>
                        </div>
                        <div class="row" *ngIf="customerVisitDocValidatedNonPartner">
                            <i class="fas fa-exclamation-triangle mr-1 text-warning mr-3"></i>
                            <p class="medium-emphasis body-2">
                                A customer visit form must be uploaded if a customer or adoption visit was performed.
                            </p>
                        </div>

                        <div class="row" *ngIf="contractDocValidated">
                            <i class="fas fa-stop-circle mr-1 text-error mr-3"></i>
                            <p class="medium-emphasis body-2">
                                A contract must be uploaded with all new RMR.
                            </p>
                        </div>
                        <div class="row" *ngIf="contractDocValidatedNonPartner">
                            <i class="fas fa-exclamation-triangle mr-1 text-warning mr-3"></i>
                            <p class="medium-emphasis body-2">
                                A contract must be uploaded with all new RMR.
                            </p>
                        </div>

                        <div class="row" *ngIf="workOrderDocValidated">
                            <i class="fas fa-stop-circle mr-1 text-error mr-3"></i>
                            <p class="medium-emphasis body-2">
                                A work order must be uploaded for all service related invoices.
                            </p>
                        </div>
                        <div class="row" *ngIf="workOrderDocValidatedNonPartner">
                            <i class="fas fa-exclamation-triangle mr-1 text-warning mr-3"></i>
                            <p class="medium-emphasis body-2">
                                A work order must be uploaded for all service related invoices.
                            </p>
                        </div>

                        <div class="row" *ngIf="contractTermsValidated">
                            <i class="fas fa-stop-circle mr-1 text-error mr-3"></i>
                            <p class="medium-emphasis body-2">
                                RMR items require a contract start date.
                            </p>
                        </div>
                        <div class="row" *ngIf="contractTermsValidatedNonPartner">
                            <i class="fas fa-exclamation-triangle mr-1 text-warning mr-3"></i>
                            <p class="medium-emphasis body-2">
                                RMR items require a contract start date.
                            </p>
                        </div>

                        <div class="row" *ngIf="addViewCommentsSignalsValidated">
                            <i class="fas fa-stop-circle mr-1 text-error mr-3"></i>
                            <p class="medium-emphasis body-2">
                                If you check the option "Not All Signals Tested", you need to provide detail in the Comments section.
                            </p>
                        </div>
                        <div class="row" *ngIf="addViewCommentsSignalsValidatedNonPartner">
                            <i class="fas fa-exclamation-triangle mr-1 text-warning mr-3"></i>
                            <p class="medium-emphasis body-2">
                                If you check the option "Not All Signals Tested", you need to provide detail in the Comments section.
                            </p>
                        </div>

                        <div class="row" *ngIf="addViewCommentsSystemValidated">
                            <i class="fas fa-stop-circle mr-1 text-error mr-3"></i>
                            <p class="medium-emphasis body-2">
                                You selected the System Type "Other". Please provide details in the Comments section.
                            </p>
                        </div>
                        <div class="row" *ngIf="addViewCommentsSystemValidatedNonPartner">
                            <i class="fas fa-exclamation-triangle mr-1 text-warning mr-3"></i>
                            <p class="medium-emphasis body-2">
                                You selected the System Type "Other". Please provide details in the Comments section.
                            </p>
                        </div>

                        <div class="row" *ngIf="addViewCommentsPanelValidated">
                            <i class="fas fa-stop-circle mr-1 text-error mr-3"></i>
                            <p class="medium-emphasis body-2">
                                You selected the Panel Type "Other". Please provide details in the Comments section.
                            </p>
                        </div>
                        <div class="row" *ngIf="addViewCommentsPanelValidatedNonPartner">
                            <i class="fas fa-exclamation-triangle mr-1 text-warning mr-3"></i>
                            <p class="medium-emphasis body-2">
                                You selected the Panel Type "Other". Please provide details in the Comments section.
                            </p>
                        </div>

                        <div class="row" *ngIf="addNewRMRServiceBoxCheckedValidated">
                            <i class="fas fa-exclamation-triangle mr-1 text-warning mr-3"></i>
                            <p class="medium-emphasis body-2">
                                You selected the option to add RMR, however no RMR has been added yet.
                            </p>
                        </div>
                        <div class="row" *ngIf="laborChargesValidated">
                            <i class="fas fa-exclamation-triangle mr-1 text-warning mr-3"></i>
                            <p class="medium-emphasis body-2">
                                A service invoice may include labor charges, however none have been entered.
                            </p>
                        </div>
                        <div class="row" *ngIf="otherChargesValidated">
                            <i class="fas fa-exclamation-triangle mr-1 text-warning mr-3"></i>
                            <p class="medium-emphasis body-2">
                                A service invoice may include other charges, however none have been entered.
                            </p>
                        </div>
                        <div class="row" *ngIf="contractInPresentOrFutureValidated">
                            <i class="fas fa-exclamation-triangle mr-1 text-warning mr-3"></i>
                            <p class="medium-emphasis body-2">
                                You have entered a contract start date that is in the future.
                            </p>
                        </div>
                        <div class="row" *ngIf="contractInPastValidated">
                            <i class="fas fa-exclamation-triangle mr-1 text-warning mr-3"></i>
                            <p class="medium-emphasis body-2">
                                You have entered a contract start date that is greater than three months in the past.
                            </p>
                        </div>
                        <div class="row" *ngIf="fullTextValidated">
                            <i class="fas fa-exclamation-triangle mr-1 text-warning mr-3"></i>
                            <p class="medium-emphasis body-2">
                                Customer has a pending cancellation. You may not be paid for this invoice.
                            </p>
                        </div>

                        <div class="row" *ngIf="partialTextValidated">
                            <i class="fas fa-exclamation-triangle mr-1 text-warning mr-3"></i>
                            <p class="medium-emphasis body-2">
                                Customer has a pending partial cancellation. You may not be paid for this invoice.
                            </p>
                        </div>
                        <div class="row" *ngIf="collectionsStatusValidated">
                            <i class="fas fa-exclamation-triangle mr-1 text-warning mr-3"></i>
                            <p class="medium-emphasis body-2">
                                Customer is in collections  {{collectionsStatus}}. Unless the customer is brought to current, you may not be paid for this invoice
                            </p>
                        </div>
                        <div class="row" *ngIf="customerStatusValidated">
                            <i class="fas fa-exclamation-triangle mr-1 text-warning mr-3"></i>
                            <p class="medium-emphasis body-2">
                                Customer is cancelled. You may not be paid for this invoice.
                            </p>
                        </div>
                        <div class="row" *ngIf="signalsCheckedText">
                            <i class="fas fa-stop-circle mr-1 text-error mr-3"></i>
                            <p class="medium-emphasis body-2">
                                You must indicate if the signals were tested or not.
                            </p>
                        </div>
                    </div>
                </header>
                <form >
                    <div class="row">
                        <div class="col">
                            <p class="body-2 high-emphasis" *ngIf="formIsValidText">
                                <i class="fas fa-check text-success pr-2"></i>The form is valid.
                            </p>
                        </div>
                    </div>
                </form>
            </section>
        </div>
    </div>
    <div class="modal-footer">
        <div class="col">
            <button 
                type="button" 
                class="btn btn-validate" 
                (click)="modal.close('Save click')"
            ><i class="fas fa-undo-alt pr-2"></i>Return to Invoice Entry</button>
        </div>
        <div class="col">
            <i class="fas fa-stop-circle mr-1 text-error"></i>Required
        </div>
        <div class="col">
            <i class="fas fa-exclamation-triangle mr-1 text-warning"></i>Suggested
        </div>
        <div class="col">
            <button 
                type="submit" 
                class="btn btn-secondary"
                (click)="onSubmit(incentiveDashboardForm);clicked = true;"
                [disabled]="clicked || !incentiveDashboardForm.valid || !partnerCommentsEntryForm.valid"
            ><i class="fas fa-plus pr-2"></i>Submit Invoice</button>

            <!-- <button 
                type="button" 
                class="btn btn-secondary float-right mr-2" 
                (click)="onSubmit(incentiveDashboardForm);clicked = true;" 
                [disabled]="clicked || !incentiveDashboardForm.valid">
                <i class="fas fa-plus pr-2"></i>Submit Invoice
            </button> -->
        </div>
    </div>
</ng-template>