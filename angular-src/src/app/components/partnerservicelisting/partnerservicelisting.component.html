<div class="container">
    <div class="row mt-5">
        <div class="col-md-12">
            <h5 class="headline-5 high-emphasis">Partner Service List</h5>
        </div>
    </div>
    <div class="row mt-5">
        <div class="col-md-12">
            <table class="table table-striped table-responsive">
                <thead>
                    <tr>
                        <th scope="col">Ticket Number</th>
                        <th scope="col">3G Status</th>
                        <th scope="col">Address 1</th>
                        <th scope="col">City, State, Zip</th>
                        <th scope="col">Created On</th>
                        <th scope="col">Cancel Status</th>
                        <th scope="col">Problem</th>
                        <th scope="col">Collections Status</th>
                        <th scope="col">Customer Number</th>
                        <th scope="col">Customer Name</th>
                        <th scope="col">Customer Contact</th>
                        <th scope="col">Phone #</th>
                        <th scope="col">Customer Contact #</th>
                        <th scope="col">Comments</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of partnerServiceListing | slice: (page-1) * pageSize : (page-1) * pageSize + pageSize">
                        <td id="{{ item.service_Ticket_Id }}" (click)="onOpenPartnerServiceListingModal(item.service_Ticket_Id, item.ticket_Number, item.creation_Date, item.problem_Code, item.contactName, item.contactPhone, item.acContact, item.sitePhone, item.acContactEmail, item.customer_Number, item.customer_Name, item.customerRMR, item.customer_Since, item.cancelStatus, item.business_Name, item.comResStatus, item.address_1, item.address_2, item.address_3, item.city, item.state, item.zipCode, item.status3G, item.csAccount, item.systemType, item.panelType, item.centralStation, item.panel_Location)">{{ item.ticket_Number }}</td>
                        <td>{{ item.status3G }}</td>
                        <td>{{ item.address_1 }}</td>
                        <td>{{ item.city }}, {{ item.state }} {{ item.zipCode }}</td>
                        <td>{{ item.creation_Date | date }}</td>
                        <td>{{ item.cancelStatus }}</td>
                        <td>{{ item.problem_Code }}</td>
                        <td>{{ item.collectionQueue }}</td>
                        <td>{{ item.customer_Number }}</td>
                        <td>{{ item.customer_Name }}</td>
                        <td>{{ item.contactName }}</td>
                        <td>{{ item.sitePhone | phone }}</td>
                        <td>{{ item.contactPhone | phone }}</td>
                        <td>{{ item.customerComments }}</td>
                    </tr>
                </tbody>
            </table>
            <ngb-pagination
                [collectionSize]="partnerServiceListing?.length"
                [(page)]="page" 
                [maxSize]="5" 
                [rotate]="true" 
                [ellipses]="false" 
                [boundaryLinks]="true"
                class="d-flex justify-content-center mt-5">
            </ngb-pagination>
        </div>
    </div>
</div>

<ngx-spinner bdColor="rgba(51, 51, 51, 0.8)" size="default" type="ball-spin-clockwise">  
    <p style="color: white">Please Wait...</p>  
</ngx-spinner>


<!-- Partner Service Listing Details Modal -->
<div class="modal fade" id="detailsModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" id="maxWidth-1160">
        <div class="modal-content">
            <div class="modal-header pb-0 pl-2">
                <div class="col-md-12">
                    <!-- <h2 class="modal-title" id="exampleModalLabel">Memo</h2> -->
                </div>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body pt-0">
                <div class="card p-3">
                    <div class="card-body">
                        <div class="row">
                            <div class="col">
                                <p class="mb-0">
                                    <span class="subtitle-2">Ticket #</span> 
                                </p>
                                <p>
                                    <span class="body-2">{{ ticket_Number }}</span>
                                </p>
                            </div>
                            <div class="col">
                                <p class="mb-0">
                                    <span class="subtitle-2">Created On</span>
                                </p>
                                <p>
                                    <span class="body-2">{{ creation_Date | date }}</span>
                                </p>
                            </div>
                            <div class="col">
                                <p class="mb-0">
                                    <span class="subtitle-2">Problem</span>
                                </p>
                                <p>
                                    <span class="body-2">{{ problem_Code }}</span>
                                </p>
                            </div>
                            <div class="col">
                                <p class="mb-0">
                                    <span class="subtitle-2">Customer Contact</span>
                                </p>
                                <p>
                                    <span class="body-2">{{ customer_Name }}</span>
                                </p>
                                <p>
                                    <span class="body-2">{{ sitePhone | phone }}</span>
                                </p>
                            </div>
                            <div class="col">
                                <p class="mb-0">
                                    <span class="subtitle-2">Alarm Connections Contact</span>
                                </p>
                                <p>
                                    <span class="body-2">{{ acContact }}</span>
                                </p>
                                <p>
                                    <span class="body-2">{{ contactPhone | phone }}</span>
                                </p>
                                <p>
                                    <span class="body-2">{{ acContactEmail }}</span>
                                </p>
                                <!-- <button type="submit" class="btn btn-block btn-secondary" (click)="onOpenMemo()"><i class="fas fa-plus pr-2"></i>Message</button>
                                <p *ngIf="incentiveID === 0; else incentiveIDAvailBlock" class="body-2 mt-4">There is no incentive available</p>
                                <ng-template #incentiveIDAvailBlock> -->
                                    <!-- <button type="submit" class="btn btn-block btn-secondary mt-4" (click)="onAddDocument()"><i class="fas fa-plus pr-2"></i>Upload File</button> -->
                                    <!-- <button class="btn btn-block btn-secondary mt-4" (click)="openComingSoonModal(comingSoon)" ><i class="fas fa-plus pr-2"></i>Upload File</button> -->
                                <!-- </ng-template> -->
                            </div>
                        </div>
                        <div class="row border-invoice-status">
                            <div class="col">
                                <p class="mb-0">
                                    <span class="subtitle-2">Customer Information</span>
                                </p>
                                <p>
                                    <span class="body-2">{{ customer_Number }} {{ customer_Name }}</span>
                                </p>
                                <p class="mb-0">
                                    <span class="subtitle-2">Collection Status</span>
                                </p>
                                <p>
                                    <span class="body-2 text-error high-emphasis font-weight-bold">{{ cancelStatus }}</span>
                                </p>
                            </div>
                            <div class="col">
                                <p class="mb-0">
                                    <span class="subtitle-2">RMR</span>
                                </p>
                                <p>
                                    <span class="body-2">{{ customerRMR | currency }}</span>
                                </p>
                                <!-- <p class="mb-0">
                                    <span class="subtitle-2">Credit Date</span>
                                </p> -->
                                <p>
                                    <!-- <span class="body-2">{{ creditDate }}</span> -->
                                </p>
                            </div>
                            <div class="col">
                                <p class="mb-0">
                                    <span class="subtitle-2">Customer Since</span>
                                </p>
                                <p>
                                    <span class="body-2">{{ customer_Since | date }}</span>
                                </p>

                                <p class="mb-0">
                                    <span class="subtitle-2">Pending Cancellation</span>
                                </p>
                                <p>
                                    <span class="body-2 text-error high-emphasis font-weight-bold">{{ cancelStatus }}</span>
                                </p>
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col border-invoice-status mr-1 rounded">
                                <p class="mb-0">
                                    <span class="subtitle-2">Site Information</span>
                                </p>
                                <p>
                                    <!-- <span class="body-2">{{ customer_Number }} </span>
                                    <span class="body-2">{{ customer_Name }}</span> -->
                                </p>
                                <p>
                                    <!-- <span class="body-2">{{ address_1 }}</span> -->
                                </p>
                                <p>
                                    <!-- <span class="body-2">{{ city }}, {{ state }} {{ zipCode }}</span> -->
                                </p>
                                <p class="mb-0">
                                    <span class="subtitle-2">CS Account #</span>
                                </p>
                                <p>
                                    <span class="body-2">ST123-1211</span>
                                </p>
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

<ng-template #comingSoon>
    <div class="modal-header">
        <!-- <button class="close" aria-label="close" (click)="modal.dismiss('Cross click')">
            <span aria-label="true">&times;</span>
        </button> -->
    </div>
    <div class="modal-body">
        <div class="card">
          <div class="card-header border-0 paddingBottom-14px">
            <div class="row align-items-center">
              <div class="col">
                <h5 class="mb-1 mt-1 text-center headline-5">Document Upload Coming Soon</h5>
              </div>
            </div>
          </div>
          <div class="card-body paddingTop-14px">
            <div class="row">
              <div class="col-md-12 pt-2 pb-4">
              </div>
            </div>
          </div>
        </div>
    </div>
</ng-template>
